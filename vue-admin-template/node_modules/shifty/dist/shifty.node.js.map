{"version":3,"sources":["webpack://shifty/webpack/universalModuleDefinition","webpack://shifty/./src/easing-functions.js","webpack://shifty/./src/bezier.js","webpack://shifty/./src/tweenable.js","webpack://shifty/./src/token.js","webpack://shifty/./src/interpolate.js","webpack://shifty/./src/scene.js","webpack://shifty/./src/index.js","webpack://shifty/webpack/bootstrap","webpack://shifty/webpack/runtime/define property getters","webpack://shifty/webpack/runtime/hasOwnProperty shorthand","webpack://shifty/webpack/runtime/make namespace object","webpack://shifty/webpack/startup"],"names":["linear","pos","easeInQuad","Math","pow","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeOutBounce","easeInBack","s","easeOutBack","easeInOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","easeFromTo","easeFrom","easeTo","cubicBezierAtTime","t","p1x","p1y","p2x","p2y","duration","ax","bx","cx","ay","by","cy","sampleCurveX","sampleCurveY","sampleCurveDerivativeX","solveEpsilon","fabs","n","solveCurveX","x","epsilon","t0","t1","t2","x2","d2","i","solve","getCubicBezierTransition","x1","y1","y2","setBezierFunction","name","cubicBezierTransition","displayName","Tweenable","unsetBezierFunction","DEFAULT_EASING","DEFAULT_DURATION","UPDATE_TIME","root","window","global","AFTER_TWEEN","AFTER_TWEEN_END","BEFORE_TWEEN","TWEEN_CREATED","TYPE_FUNCTION","TYPE_STRING","scheduleFunction","requestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","mozCancelRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","noop","listHead","listTail","resetList","getListHead","getListTail","formulas","easingFunctions","tweenProps","forPosition","currentState","originalState","targetState","timestamp","easing","easedPosition","easingObjectProp","start","normalizedPosition","easingFn","hasOneEase","call","key","processTween","tween","currentTime","_timestamp","_currentState","delay","_delay","_duration","_targetState","endTime","timeToCompute","_hasEnded","offset","hasFilters","_filters","length","_render","_data","stop","_applyFilter","_originalState","_easing","processTweens","nextTweenToProcess","now","currentTween","_next","getCurrentTime","Date","heartbeatIsRunning","shouldScheduleUpdate","doScheduleUpdate","scheduleUpdate","composeEasingObject","fromTweenParams","composedEasing","Array","isArray","typeofEasing","prop","remove","previousTween","nextTween","_previous","defaultPromiseCtor","Promise","Symbol","toStringTag","initialState","config","undefined","_config","_resolve","_reject","_start","_promiseCtor","setConfig","filterName","filterType","filter","_isPlaying","_pausedAtTime","get","_resume","promise","finish","render","step","data","attachment","_scheduleId","from","to","anyPropsAreStrings","currentProp","hasOwnProperty","filters","doesApply","push","onFulfilled","onRejected","_promise","resolve","reject","then","onFinally","state","millisecond","max","gotoEnd","tweenable","setScheduleFunction","fn","R_NUMBER_COMPONENT","R_FORMAT_CHUNKS","R_UNFORMATTED_VALUES","R_RGBA","number","source","comma","RegExp","R_RGBA_PREFIX","R_HEX","VALUE_PLACEHOLDER","getFormatChunksFrom","rawValues","prefix","map","val","getFormatStringFrom","formattedString","chunks","match","charAt","unshift","join","hexToDec","hex","parseInt","hexToRGBArray","replace","split","substr","convertHexToRGB","hexString","filterStringChunks","pattern","unfilteredString","patternMatches","filteredString","forEach","sanitizeHexChunksToRGB","str","sanitizeObjectForHexProps","stateObject","sanitizeRGBAChunk","rgbChunk","rgbaRawValues","rgbNumbers","slice","floor","Error","sanitizeRGBChunks","getValuesFrom","getFormatSignatures","signatures","propertyName","property","formatString","chunkNames","expandFormattedProperties","formatSignatures","extractPropertyChunks","extractedValues","chunkName","getValuesList","getFormattedValues","rawValue","toFixed","collapseFormattedProperties","expandEasingObject","easingObject","tokenData","easingNames","defaultEasing","collapseEasingObject","firstEasing","easingName","tweenCreated","_tokenData","beforeTween","afterTween","mockTweenable","interpolate","position","current","set","interpolatedValues","Scene","tweenables","add","bind","index","indexOf","splice","some","isPlaying","pause","playingTweenables","resume","hasEnded","token"],"mappings":"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AAAA,yBAwKOpG,OAxKP,EAwKgB;AACZ,+CAAiByC,OAAjB,CAAyB,UAAAxC,SAAS;AAAA,eAAIA,SAAS,CAACxE,IAAV,CAAeuE,OAAf,CAAJ;AAAA,OAAlC;;AACA,aAAO,IAAP;AACD;AA3KH;AAAA;AAAA,wBAuCmB;AACf,2DAAW,IAAX;AACD;AAED;AACF;AACA;AACA;AACA;AACA;;AAhDA;AAAA;AAAA,wBAiD0B;AACtB,aAAO,yCAAiB9B,MAAjB,CAAwB,UAAA+B,SAAS;AAAA,eAAI,CAACA,SAAS,CAACoG,QAAV,EAAL;AAAA,OAAjC,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAvEA;AAAA;AAAA,wBAwEiB;AACb,aAAO,yCAAiBnF,GAAjB,CAAqB,UAAAjB,SAAS;AAAA,eAAIA,SAAS,CAACN,IAAV,EAAJ;AAAA,OAA9B,CAAP;AACD;AA1EH;;AAAA;AAAA,I;;ACFA;AACA;AACA;AAEA;AAMA;AAEAjI,uBAAA,GAA0B4O,qBAA1B;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;UCvKA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"shifty.node.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"shifty\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"shifty\"] = factory();\n\telse\n\t\troot[\"shifty\"] = factory();\n})(global, function() {\nreturn ","/** @typedef {import(\".\").shifty.easingFunction} shifty.easingFunction */\n\n/*!\n * All equations are adapted from Thomas Fuchs'\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).\n *\n * Based on Easing Equations (c) 2003 [Robert\n * Penner](http://www.robertpenner.com/), all rights reserved. This work is\n * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).\n */\n\n/*!\n *  TERMS OF USE - EASING EQUATIONS\n *  Open source under the BSD License.\n *  Easing Equations (c) 2003 Robert Penner, all rights reserved.\n */\n\n/**\n * @member Tweenable.formulas\n * @description A static Object of {@link shifty.easingFunction}s that can by\n * used by Shifty. The default values are defined in\n * [`easing-functions.js`](easing-functions.js.html), but you can add your own\n * {@link shifty.easingFunction}s by defining them as keys to this Object.\n *\n * Shifty ships with an implementation of [Robert Penner's easing\n * equations](http://robertpenner.com/easing/), as adapted from\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js)'s\n * implementation.\n * <p data-height=\"934\" data-theme-id=\"0\" data-slug-hash=\"wqObdO\"\n * data-default-tab=\"js,result\" data-user=\"jeremyckahn\" data-embed-version=\"2\"\n * data-pen-title=\"Shifty - Easing formula names\" class=\"codepen\">See the Pen <a\n * href=\"https://codepen.io/jeremyckahn/pen/wqObdO/\">Shifty - Easing formula\n * names</a> by Jeremy Kahn (<a\n * href=\"https://codepen.io/jeremyckahn\">@jeremyckahn</a>) on <a\n * href=\"https://codepen.io\">CodePen</a>.</p>\n * <script async\n * src=\"https://production-assets.codepen.io/assets/embed/ei.js\"></script>\n * @type {Object.<shifty.easingFunction>}\n * @static\n */\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const linear = pos => pos\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInQuad = pos => Math.pow(pos, 2)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutQuad = pos => -(Math.pow(pos - 1, 2) - 1)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInOutQuad = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 2) : -0.5 * ((pos -= 2) * pos - 2)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInCubic = pos => Math.pow(pos, 3)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutCubic = pos => Math.pow(pos - 1, 3) + 1\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInOutCubic = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 3) : 0.5 * (Math.pow(pos - 2, 3) + 2)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInQuart = pos => Math.pow(pos, 4)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutQuart = pos => -(Math.pow(pos - 1, 4) - 1)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInOutQuart = pos =>\n  (pos /= 0.5) < 1\n    ? 0.5 * Math.pow(pos, 4)\n    : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInQuint = pos => Math.pow(pos, 5)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutQuint = pos => Math.pow(pos - 1, 5) + 1\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInOutQuint = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 5) : 0.5 * (Math.pow(pos - 2, 5) + 2)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInSine = pos => -Math.cos(pos * (Math.PI / 2)) + 1\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutSine = pos => Math.sin(pos * (Math.PI / 2))\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInOutSine = pos => -0.5 * (Math.cos(Math.PI * pos) - 1)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInExpo = pos => (pos === 0 ? 0 : Math.pow(2, 10 * (pos - 1)))\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutExpo = pos => (pos === 1 ? 1 : -Math.pow(2, -10 * pos) + 1)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInOutExpo = pos => {\n  if (pos === 0) {\n    return 0\n  }\n\n  if (pos === 1) {\n    return 1\n  }\n\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * Math.pow(2, 10 * (pos - 1))\n  }\n\n  return 0.5 * (-Math.pow(2, -10 * --pos) + 2)\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInCirc = pos => -(Math.sqrt(1 - pos * pos) - 1)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutCirc = pos => Math.sqrt(1 - Math.pow(pos - 1, 2))\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInOutCirc = pos =>\n  (pos /= 0.5) < 1\n    ? -0.5 * (Math.sqrt(1 - pos * pos) - 1)\n    : 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutBounce = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos\n  } else if (pos < 2 / 2.75) {\n    return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75\n  } else if (pos < 2.5 / 2.75) {\n    return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375\n  } else {\n    return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375\n  }\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInBack = pos => {\n  const s = 1.70158\n  return pos * pos * ((s + 1) * pos - s)\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeOutBack = pos => {\n  const s = 1.70158\n  return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeInOutBack = pos => {\n  let s = 1.70158\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s))\n  }\n  return 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2)\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const elastic = pos =>\n  -1 * Math.pow(4, -8 * pos) * Math.sin(((pos * 6 - 1) * (2 * Math.PI)) / 2) + 1\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const swingFromTo = pos => {\n  let s = 1.70158\n  return (pos /= 0.5) < 1\n    ? 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s))\n    : 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2)\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const swingFrom = pos => {\n  const s = 1.70158\n  return pos * pos * ((s + 1) * pos - s)\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const swingTo = pos => {\n  const s = 1.70158\n  return (pos -= 1) * pos * ((s + 1) * pos + s) + 1\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const bounce = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos\n  } else if (pos < 2 / 2.75) {\n    return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75\n  } else if (pos < 2.5 / 2.75) {\n    return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375\n  } else {\n    return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375\n  }\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const bouncePast = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos\n  } else if (pos < 2 / 2.75) {\n    return 2 - (7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75)\n  } else if (pos < 2.5 / 2.75) {\n    return 2 - (7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375)\n  } else {\n    return 2 - (7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375)\n  }\n}\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeFromTo = pos =>\n  (pos /= 0.5) < 1\n    ? 0.5 * Math.pow(pos, 4)\n    : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeFrom = pos => Math.pow(pos, 4)\n\n/**\n * @memberof Tweenable.formulas\n * @type {shifty.easingFunction}\n * @param {number} pos\n * @returns {number}\n */\nexport const easeTo = pos => Math.pow(pos, 0.25)\n","import { Tweenable } from './tweenable'\n/** @typedef {import(\".\").shifty.easingFunction} shifty.easingFunction */\n\n/**\n * The Bezier magic in this file is adapted/copied almost wholesale from\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/cubic-bezier.js),\n * which was adapted from Apple code (which probably came from\n * [here](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h)).\n * Special thanks to Apple and Thomas Fuchs for much of this code.\n */\n\n/**\n *  Copyright (c) 2006 Apple Computer, Inc. All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n *  1. Redistributions of source code must retain the above copyright notice,\n *  this list of conditions and the following disclaimer.\n *\n *  2. Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation\n *  and/or other materials provided with the distribution.\n *\n *  3. Neither the name of the copyright holder(s) nor the names of any\n *  contributors may be used to endorse or promote products derived from\n *  this software without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n *  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n *  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n *  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n *  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n// port of webkit cubic bezier handling by http://www.netzgesta.de/dev/\n\n/**\n * @param {number} t\n * @param {number} p1x\n * @param {number} p1y\n * @param {number} p2x\n * @param {number} p2y\n * @param {number} duration\n * @returns {Function}\n * @private\n */\nfunction cubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n  let ax = 0,\n    bx = 0,\n    cx = 0,\n    ay = 0,\n    by = 0,\n    cy = 0\n\n  const sampleCurveX = t => ((ax * t + bx) * t + cx) * t\n\n  const sampleCurveY = t => ((ay * t + by) * t + cy) * t\n\n  const sampleCurveDerivativeX = t => (3 * ax * t + 2 * bx) * t + cx\n\n  const solveEpsilon = duration => 1 / (200 * duration)\n\n  const fabs = n => (n >= 0 ? n : 0 - n)\n\n  const solveCurveX = (x, epsilon) => {\n    let t0, t1, t2, x2, d2, i\n\n    for (t2 = x, i = 0; i < 8; i++) {\n      x2 = sampleCurveX(t2) - x\n\n      if (fabs(x2) < epsilon) {\n        return t2\n      }\n\n      d2 = sampleCurveDerivativeX(t2)\n\n      if (fabs(d2) < 1e-6) {\n        break\n      }\n\n      t2 = t2 - x2 / d2\n    }\n\n    t0 = 0\n    t1 = 1\n    t2 = x\n\n    if (t2 < t0) {\n      return t0\n    }\n\n    if (t2 > t1) {\n      return t1\n    }\n\n    while (t0 < t1) {\n      x2 = sampleCurveX(t2)\n\n      if (fabs(x2 - x) < epsilon) {\n        return t2\n      }\n\n      if (x > x2) {\n        t0 = t2\n      } else {\n        t1 = t2\n      }\n\n      t2 = (t1 - t0) * 0.5 + t0\n    }\n\n    return t2 // Failure.\n  }\n\n  const solve = (x, epsilon) => sampleCurveY(solveCurveX(x, epsilon))\n\n  cx = 3 * p1x\n  bx = 3 * (p2x - p1x) - cx\n  ax = 1 - cx - bx\n  cy = 3 * p1y\n  by = 3 * (p2y - p1y) - cy\n  ay = 1 - cy - by\n\n  return solve(t, solveEpsilon(duration))\n}\n// End ported code\n\n/**\n *  GetCubicBezierTransition(x1, y1, x2, y2) -> Function.\n *\n *  Generates a transition easing function that is compatible\n *  with WebKit's CSS transitions `-webkit-transition-timing-function`\n *  CSS property.\n *\n *  The W3C has more information about CSS3 transition timing functions:\n *  http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag\n *\n *  @param {number} [x1]\n *  @param {number} [y1]\n *  @param {number} [x2]\n *  @param {number} [y2]\n *  @return {Function}\n */\nexport const getCubicBezierTransition = (\n  x1 = 0.25,\n  y1 = 0.25,\n  x2 = 0.75,\n  y2 = 0.75\n) => pos => cubicBezierAtTime(pos, x1, y1, x2, y2, 1)\n\n/**\n * Create a Bezier easing function and attach it to {@link\n * Tweenable.formulas}.  This function gives you total control over the\n * easing curve.  Matthew Lein's [Ceaser](http://matthewlein.com/ceaser/) is a\n * useful tool for visualizing the curves you can make with this function.\n * @method shifty.setBezierFunction\n * @param {string} name The name of the easing curve.  Overwrites the old\n * easing function on {@link Tweenable.formulas} if it exists.\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @return {shifty.easingFunction} The {@link shifty.easingFunction} that was\n * attached to {@link Tweenable.formulas}.\n */\nexport const setBezierFunction = (name, x1, y1, x2, y2) => {\n  const cubicBezierTransition = getCubicBezierTransition(x1, y1, x2, y2)\n\n  cubicBezierTransition.displayName = name\n  cubicBezierTransition.x1 = x1\n  cubicBezierTransition.y1 = y1\n  cubicBezierTransition.x2 = x2\n  cubicBezierTransition.y2 = y2\n\n  return (Tweenable.formulas[name] = cubicBezierTransition)\n}\n\n/**\n * `delete` an easing function from {@link Tweenable.formulas}.  Be\n * careful with this method, as it `delete`s whatever easing formula matches\n * `name` (which means you can delete standard Shifty easing functions).\n * @method shifty.unsetBezierFunction\n * @param {string} name The name of the easing function to delete.\n * @return {boolean} Whether or not the functions was `delete`d.\n */\nexport const unsetBezierFunction = name => delete Tweenable.formulas[name]\n","import * as easingFunctions from './easing-functions'\nimport { getCubicBezierTransition } from './bezier'\n/** @typedef {import(\"./index\").shifty.filter} shifty.filter */\n/** @typedef {import(\"./index\").shifty.tweenConfig} shifty.tweenConfig */\n/** @typedef {import(\"./index\").shifty.scheduleFunction} shifty.scheduleFunction */\n\n// CONSTANTS\nconst DEFAULT_EASING = 'linear'\nconst DEFAULT_DURATION = 500\nconst UPDATE_TIME = 1000 / 60\nconst root = typeof window !== 'undefined' ? window : global\n\nconst AFTER_TWEEN = 'afterTween'\nconst AFTER_TWEEN_END = 'afterTweenEnd'\nconst BEFORE_TWEEN = 'beforeTween'\nconst TWEEN_CREATED = 'tweenCreated'\nconst TYPE_FUNCTION = 'function'\nconst TYPE_STRING = 'string'\n\n// requestAnimationFrame() shim by Paul Irish (modified for Shifty)\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\nlet scheduleFunction =\n  root.requestAnimationFrame ||\n  root.webkitRequestAnimationFrame ||\n  root.oRequestAnimationFrame ||\n  root.msRequestAnimationFrame ||\n  (root.mozCancelRequestAnimationFrame && root.mozRequestAnimationFrame) ||\n  setTimeout\n\nconst noop = () => {}\n\nlet listHead = null\nlet listTail = null\n\n/**\n * Strictly for testing.\n * @private\n * @internal\n */\nexport const resetList = () => {\n  listHead = listTail = null\n}\n\n/**\n * Strictly for testing.\n * @returns {Tweenable}\n * @private\n * @internal\n */\nexport const getListHead = () => listHead\n\n/**\n * Strictly for testing.\n * @returns {Tweenable}\n * @private\n * @internal\n */\nexport const getListTail = () => listTail\n\nconst formulas = { ...easingFunctions }\n\n/**\n * Calculates the interpolated tween values of an Object for a given\n * timestamp.\n * @param {number} forPosition The position to compute the state for.\n * @param {Object} currentState Current state properties.\n * @param {Object} originalState: The original state properties the Object is\n * tweening from.\n * @param {Object} targetState: The destination state properties the Object\n * is tweening to.\n * @param {number} duration: The length of the tween in milliseconds.\n * @param {number} timestamp: The UNIX epoch time at which the tween began.\n * @param {Record<string, string|Function>} easing: This Object's keys must correspond\n * to the keys in targetState.\n * @returns {Object}\n * @private\n */\nexport const tweenProps = (\n  forPosition,\n  currentState,\n  originalState,\n  targetState,\n  duration,\n  timestamp,\n  easing\n) => {\n  let easedPosition\n  let easingObjectProp\n  let start\n\n  const normalizedPosition =\n    forPosition < timestamp ? 0 : (forPosition - timestamp) / duration\n\n  let easingFn = null\n  let hasOneEase = false\n\n  if (easing && easing.call) {\n    hasOneEase = true\n    easedPosition = easing(normalizedPosition)\n  }\n\n  for (const key in currentState) {\n    if (!hasOneEase) {\n      easingObjectProp = easing[key]\n      easingFn = easingObjectProp.call\n        ? easingObjectProp\n        : formulas[easingObjectProp]\n\n      easedPosition = easingFn(normalizedPosition)\n    }\n\n    start = originalState[key]\n\n    currentState[key] = start + (targetState[key] - start) * easedPosition\n  }\n\n  return currentState\n}\n\nconst processTween = (tween, currentTime) => {\n  let timestamp = tween._timestamp\n  const currentState = tween._currentState\n  const delay = tween._delay\n\n  if (currentTime < timestamp + delay) {\n    return\n  }\n\n  let duration = tween._duration\n  const targetState = tween._targetState\n\n  const endTime = timestamp + delay + duration\n  let timeToCompute = currentTime > endTime ? endTime : currentTime\n  tween._hasEnded = timeToCompute >= endTime\n  const offset = duration - (endTime - timeToCompute)\n  const hasFilters = tween._filters.length > 0\n\n  if (tween._hasEnded) {\n    tween._render(targetState, tween._data, offset)\n    return tween.stop(true)\n  }\n\n  if (hasFilters) {\n    tween._applyFilter(BEFORE_TWEEN)\n  }\n\n  // If the animation has not yet reached the start point (e.g., there was\n  // delay that has not yet completed), just interpolate the starting\n  // position of the tween.\n  if (timeToCompute < timestamp + delay) {\n    timestamp = duration = timeToCompute = 1\n  } else {\n    timestamp += delay\n  }\n\n  tweenProps(\n    timeToCompute,\n    currentState,\n    tween._originalState,\n    targetState,\n    duration,\n    timestamp,\n    tween._easing\n  )\n\n  if (hasFilters) {\n    tween._applyFilter(AFTER_TWEEN)\n  }\n\n  tween._render(currentState, tween._data, offset)\n}\n\n/**\n * Process all tweens currently managed by Shifty for the current tick. This\n * does not perform any timing or update scheduling; it is the logic that is\n * run *by* the scheduling functionality. Specifically, it computes the state\n * and calls all of the relevant {@link shifty.tweenConfig} functions supplied\n * to each of the tweens for the current point in time (as determined by {@link\n * Tweenable.now}.\n *\n * This is a low-level API that won't be needed in the majority of situations.\n * It is primarily useful as a hook for higher-level animation systems that are\n * built on top of Shifty. If you need this function, it is likely you need to\n * pass something like `() => {}` to {@link\n * Tweenable.setScheduleFunction}, override {@link Tweenable.now}\n * and manage the scheduling logic yourself.\n *\n * @method shifty.processTweens\n * @see https://github.com/jeremyckahn/shifty/issues/109\n */\nexport const processTweens = () => {\n  let nextTweenToProcess\n\n  const currentTime = Tweenable.now()\n  let currentTween = listHead\n\n  while (currentTween) {\n    nextTweenToProcess = currentTween._next\n    processTween(currentTween, currentTime)\n    currentTween = nextTweenToProcess\n  }\n}\n\nconst getCurrentTime = Date.now || (() => +new Date())\nlet now\nlet heartbeatIsRunning = false\n\n/**\n * Determines whether or not a heartbeat tick should be scheduled. This is\n * generally only useful for testing environments where Shifty's continuous\n * heartbeat mechanism causes test runner issues.\n *\n * If you are using Jest, you'll want to put this in a global `afterAll` hook.\n * If you don't already have a Jest setup file, follow the setup in [this\n * StackOverflow post](https://stackoverflow.com/a/57647146), and then add this\n * to it:\n *\n * ```\n * import { shouldScheduleUpdate } from 'shifty'\n *\n * afterAll(() => {\n *   shouldScheduleUpdate(false)\n * })\n * ```\n *\n * @method shifty.shouldScheduleUpdate\n * @param {boolean} doScheduleUpdate\n * @see https://github.com/jeremyckahn/shifty/issues/156\n */\nexport const shouldScheduleUpdate = doScheduleUpdate => {\n  if (doScheduleUpdate && heartbeatIsRunning) {\n    return\n  }\n\n  heartbeatIsRunning = doScheduleUpdate\n\n  if (doScheduleUpdate) {\n    scheduleUpdate()\n  }\n}\n\n/**\n * Handles the update logic for one tick of a tween.\n * @private\n */\nexport const scheduleUpdate = () => {\n  now = getCurrentTime()\n\n  if (heartbeatIsRunning) {\n    scheduleFunction.call(root, scheduleUpdate, UPDATE_TIME)\n  }\n\n  processTweens()\n}\n\n/**\n * Creates a usable easing Object from a string, a function or another easing\n * Object.  If `easing` is an Object, then this function clones it and fills\n * in the missing properties with `\"linear\"`.\n *\n * If the tween has only one easing across all properties, that function is\n * returned directly.\n * @param {Record<string, string|Function>} fromTweenParams\n * @param {Object|string|Function|Array.<number>} [easing]\n * @param {Object} [composedEasing] Reused composedEasing object (used internally)\n * @return {Record<string, string|Function>|Function}\n * @private\n */\nexport const composeEasingObject = (\n  fromTweenParams,\n  easing = DEFAULT_EASING,\n  composedEasing = {}\n) => {\n  if (Array.isArray(easing)) {\n    const cubicBezierTransition = getCubicBezierTransition(...easing)\n\n    return cubicBezierTransition\n  }\n\n  let typeofEasing = typeof easing\n\n  if (formulas[easing]) {\n    return formulas[easing]\n  }\n\n  if (typeofEasing === TYPE_STRING || typeofEasing === TYPE_FUNCTION) {\n    for (const prop in fromTweenParams) {\n      composedEasing[prop] = easing\n    }\n  } else {\n    for (const prop in fromTweenParams) {\n      composedEasing[prop] = easing[prop] || DEFAULT_EASING\n    }\n  }\n\n  return composedEasing\n}\n\n// Private declarations used below\n\nconst remove = ((previousTween, nextTween) => tween => {\n  // Adapted from:\n  // https://github.com/trekhleb/javascript-algorithms/blob/7c9601df3e8ca4206d419ce50b88bd13ff39deb6/src/data-structures/doubly-linked-list/DoublyLinkedList.js#L73-L121\n  if (tween === listHead) {\n    listHead = tween._next\n\n    if (listHead) {\n      listHead._previous = null\n    } else {\n      listTail = null\n    }\n  } else if (tween === listTail) {\n    listTail = tween._previous\n\n    if (listTail) {\n      listTail._next = null\n    } else {\n      listHead = null\n    }\n  } else {\n    previousTween = tween._previous\n    nextTween = tween._next\n\n    previousTween._next = nextTween\n    nextTween._previous = previousTween\n  }\n\n  // Clean up any references in case the tween is restarted later.\n  tween._previous = tween._next = null\n})()\n\nconst defaultPromiseCtor = typeof Promise === 'function' ? Promise : null\n/**\n * @class\n * @implements {Promise<unknown>}\n */\nexport class Tweenable {\n  //required for Promise implementation\n  [Symbol.toStringTag] = 'Promise'\n  /**\n   * @method Tweenable.now\n   * @static\n   * @returns {number} The current timestamp.\n   */\n  static now = () => now\n\n  /**\n   * Set a custom schedule function.\n   *\n   * By default,\n   * [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame)\n   * is used if available, otherwise\n   * [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)\n   * is used.\n   * @method Tweenable.setScheduleFunction\n   * @param {shifty.scheduleFunction} fn The function to be\n   * used to schedule the next frame to be rendered.\n   * @return {shifty.scheduleFunction} The function that was set.\n   */\n  static setScheduleFunction = fn => (scheduleFunction = fn)\n\n  /**\n   * The {@link shifty.filter}s available for use.  These filters are\n   * automatically applied at tween-time by Shifty. You can define your own\n   * {@link shifty.filter}s and attach them to this object.\n   * @member Tweenable.filters\n   * @type {Record<string, shifty.filter>}\n   */\n  static filters = {}\n\n  static formulas = formulas\n\n  /**\n   * @param {Object} [initialState={}] The values that the initial tween should\n   * start at if a `from` value is not provided to {@link\n   * Tweenable#tween} or {@link Tweenable#setConfig}.\n   * @param {shifty.tweenConfig} [config] Configuration object to be passed to\n   * {@link Tweenable#setConfig}.\n   * @constructs Tweenable\n   * @memberof shifty\n   */\n  constructor(initialState = {}, config = undefined) {\n    /** @private */\n    this._config = {}\n    /** @private */\n    this._data = {}\n    /** @private */\n    this._delay = 0\n    /** @private */\n    this._filters = []\n    /** @private */\n    this._next = null\n    /** @private */\n    this._previous = null\n    /** @private */\n    this._timestamp = null\n    /** @private */\n    this._hasEnded = false\n    /** @private */\n    this._resolve = null\n    /** @private */\n    this._reject = null\n    /** @private */\n    this._currentState = initialState || {}\n    /** @private */\n    this._originalState = {}\n    /** @private */\n    this._targetState = {}\n    /** @private */\n    this._start = noop\n    /** @private */\n    this._render = noop\n    /** @private */\n    this._promiseCtor = defaultPromiseCtor\n\n    // To prevent unnecessary calls to setConfig do not set default\n    // configuration here.  Only set default configuration immediately before\n    // tweening if none has been set.\n    if (config) {\n      this.setConfig(config)\n    }\n  }\n\n  /**\n   * Applies a filter to Tweenable instance.\n   * @param {string} filterName The name of the filter to apply.\n   * @private\n   */\n  _applyFilter(filterName) {\n    for (let i = this._filters.length; i > 0; i--) {\n      const filterType = this._filters[i - i]\n      const filter = filterType[filterName]\n\n      if (filter) {\n        filter(this)\n      }\n    }\n  }\n\n  /**\n   * Configure and start a tween. If this {@link Tweenable}'s instance\n   * is already running, then it will stop playing the old tween and\n   * immediately play the new one.\n   * @method Tweenable#tween\n   * @param {shifty.tweenConfig} [config] Gets passed to {@link\n   * Tweenable#setConfig}.\n   * @return {Tweenable}\n   */\n  tween(config = undefined) {\n    if (this._isPlaying) {\n      this.stop()\n    }\n\n    if (config || !this._config) {\n      this.setConfig(config)\n    }\n\n    /** @private */\n    this._pausedAtTime = null\n    this._timestamp = Tweenable.now()\n    this._start(this.get(), this._data)\n\n    if (this._delay) {\n      this._render(this._currentState, this._data, 0)\n    }\n\n    return this._resume(this._timestamp)\n  }\n\n  /**\n   * Configure a tween that will start at some point in the future. Aside from\n   * `delay`, `from`, and `to`, each configuration option will automatically\n   * default to the same option used in the preceding tween of this {@link\n   * Tweenable} instance.\n   * @method Tweenable#setConfig\n   * @param {shifty.tweenConfig} [config={}]\n   * @return {Tweenable}\n   */\n  setConfig(config = {}) {\n    const { _config } = this\n\n    for (const key in config) {\n      _config[key] = config[key]\n    }\n\n    // Configuration options to reuse from previous tweens\n    const {\n      promise = this._promiseCtor,\n      start = noop,\n      finish,\n      render = this._config.step || noop,\n\n      // Legacy option. Superseded by `render`.\n      step = noop,\n    } = _config\n\n    // Attach something to this Tweenable instance (e.g.: a DOM element, an\n    // object, a string, etc.);\n    this._data = _config.data || _config.attachment || this._data\n\n    // Init the internal state\n    /** @private */\n    this._isPlaying = false\n    /** @private */\n    this._pausedAtTime = null\n    /** @private */\n    this._scheduleId = null\n    /** @private */\n    this._delay = config.delay || 0\n    /** @private */\n    this._start = start\n    /** @private */\n    this._render = render || step\n    /** @private */\n    this._duration = _config.duration || DEFAULT_DURATION\n    /** @private */\n    this._promiseCtor = promise\n\n    if (finish) {\n      this._resolve = finish\n    }\n\n    const { from, to = {} } = config\n    const { _currentState, _originalState, _targetState } = this\n\n    for (const key in from) {\n      _currentState[key] = from[key]\n    }\n\n    let anyPropsAreStrings = false\n\n    for (const key in _currentState) {\n      const currentProp = _currentState[key]\n\n      if (!anyPropsAreStrings && typeof currentProp === TYPE_STRING) {\n        anyPropsAreStrings = true\n      }\n\n      _originalState[key] = currentProp\n\n      // Ensure that there is always something to tween to.\n      _targetState[key] = to.hasOwnProperty(key) ? to[key] : currentProp\n    }\n\n    /** @private */\n    this._easing = composeEasingObject(\n      this._currentState,\n      _config.easing,\n      this._easing\n    )\n\n    this._filters.length = 0\n\n    if (anyPropsAreStrings) {\n      for (const key in Tweenable.filters) {\n        if (Tweenable.filters[key].doesApply(this)) {\n          this._filters.push(Tweenable.filters[key])\n        }\n      }\n\n      this._applyFilter(TWEEN_CREATED)\n    }\n\n    return this\n  }\n\n  /**\n   * Overrides any `finish` function passed via a {@link shifty.tweenConfig}.\n   * @method Tweenable#then\n   * @param {function=} onFulfilled Receives {@link shifty.promisedData} as the\n   * first parameter.\n   * @param {function=} onRejected Receives {@link shifty.promisedData} as the\n   * first parameter.\n   * @return {Promise<Object>}\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\n   */\n  then(onFulfilled, onRejected) {\n    /** @private */\n    this._promise = new this._promiseCtor((resolve, reject) => {\n      this._resolve = resolve\n      this._reject = reject\n    })\n\n    return this._promise.then(onFulfilled, onRejected)\n  }\n\n  /**\n   * @method Tweenable#catch\n   * @param {function} onRejected Receives {@link shifty.promisedData} as the\n   * first parameter.\n   * @return {Promise<Object>}\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\n   */\n  catch(onRejected) {\n    return this.then().catch(onRejected)\n  }\n  /**\n   * @method Tweenable#finally\n   * @param {function} onFinally\n   * @return {Promise<undefined>}\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally\n   */\n  finally(onFinally) {\n    return this.then().finally(onFinally)\n  }\n\n  /**\n   * @method Tweenable#get\n   * @return {Object} The current state.\n   */\n  get() {\n    return { ...this._currentState }\n  }\n\n  /**\n   * Set the current state.\n   * @method Tweenable#set\n   * @param {Object} state The state to set.\n   */\n  set(state) {\n    this._currentState = state\n  }\n\n  /**\n   * Pause a tween. Paused tweens can be resumed from the point at which they\n   * were paused. If a tween is not running, this is a no-op.\n   * @method Tweenable#pause\n   * @return {Tweenable}\n   */\n  pause() {\n    if (!this._isPlaying) {\n      return\n    }\n\n    this._pausedAtTime = Tweenable.now()\n    this._isPlaying = false\n    remove(this)\n\n    return this\n  }\n\n  /**\n   * Resume a paused tween.\n   * @method Tweenable#resume\n   * @return {Tweenable}\n   */\n  resume() {\n    return this._resume()\n  }\n\n  /**\n   * @private\n   * @param {number} currentTime\n   * @returns {Tweenable}\n   */\n  _resume(currentTime = Tweenable.now()) {\n    if (this._timestamp === null) {\n      return this.tween()\n    }\n\n    if (this._isPlaying) {\n      return this._promise\n    }\n\n    if (this._pausedAtTime) {\n      this._timestamp += currentTime - this._pausedAtTime\n      this._pausedAtTime = null\n    }\n\n    this._isPlaying = true\n\n    if (listHead === null) {\n      listHead = this\n      listTail = this\n    } else {\n      this._previous = listTail\n      listTail._next = this\n\n      listTail = this\n    }\n\n    return this\n  }\n\n  /**\n   * Move the state of the animation to a specific point in the tween's\n   * timeline.  If the animation is not running, this will cause {@link\n   * shifty.renderFunction} handlers to be called.\n   * @method Tweenable#seek\n   * @param {number} millisecond The millisecond of the animation to seek\n   * to.  This must not be less than `0`.\n   * @return {Tweenable}\n   */\n  seek(millisecond) {\n    millisecond = Math.max(millisecond, 0)\n    const currentTime = Tweenable.now()\n\n    if (this._timestamp + millisecond === 0) {\n      return this\n    }\n\n    this._timestamp = currentTime - millisecond\n\n    // Make sure that any render handlers are run.\n    processTween(this, currentTime)\n\n    return this\n  }\n\n  /**\n   * Stops a tween. If a tween is not running, this is a no-op. This method\n   * does not cancel the tween {@link external:Promise}. For that, use {@link\n   * Tweenable#cancel}.\n   * @param {boolean} [gotoEnd] If `false`, the tween just stops at its current\n   * state.  If `true`, the tweened object's values are instantly set to the\n   * target values.\n   * @method Tweenable#stop\n   * @return {Tweenable}\n   */\n  stop(gotoEnd = false) {\n    if (!this._isPlaying) {\n      return this\n    }\n\n    this._isPlaying = false\n\n    remove(this)\n\n    const hasFilters = this._filters.length > 0\n\n    if (gotoEnd) {\n      if (hasFilters) {\n        this._applyFilter(BEFORE_TWEEN)\n      }\n\n      tweenProps(\n        1,\n        this._currentState,\n        this._originalState,\n        this._targetState,\n        1,\n        0,\n        this._easing\n      )\n\n      if (hasFilters) {\n        this._applyFilter(AFTER_TWEEN)\n        this._applyFilter(AFTER_TWEEN_END)\n      }\n    }\n\n    if (this._resolve) {\n      this._resolve({\n        data: this._data,\n        state: this._currentState,\n        tweenable: this,\n      })\n    }\n\n    this._resolve = null\n    this._reject = null\n\n    return this\n  }\n\n  /**\n   * {@link Tweenable#stop}s a tween and also `reject`s its {@link\n   * external:Promise}. If a tween is not running, this is a no-op. Prevents\n   * calling any provided `finish` function.\n   * @param {boolean} [gotoEnd] Is propagated to {@link Tweenable#stop}.\n   * @method Tweenable#cancel\n   * @return {Tweenable}\n   * @see https://github.com/jeremyckahn/shifty/issues/122\n   */\n  cancel(gotoEnd = false) {\n    const { _currentState, _data, _isPlaying } = this\n\n    if (!_isPlaying) {\n      return this\n    }\n\n    if (this._reject) {\n      this._reject({\n        data: _data,\n        state: _currentState,\n        tweenable: this,\n      })\n    }\n\n    this._resolve = null\n    this._reject = null\n\n    return this.stop(gotoEnd)\n  }\n\n  /**\n   * Whether or not a tween is running.\n   * @method Tweenable#isPlaying\n   * @return {boolean}\n   */\n  isPlaying() {\n    return this._isPlaying\n  }\n\n  /**\n   * Whether or not a tween has finished running.\n   * @method Tweenable#hasEnded\n   * @return {boolean}\n   */\n  hasEnded() {\n    return this._hasEnded\n  }\n\n  /**\n   * @method Tweenable#setScheduleFunction\n   * @param {shifty.scheduleFunction} scheduleFunction\n   * @deprecated Will be removed in favor of {@link Tweenable.setScheduleFunction} in 3.0.\n   */\n  setScheduleFunction(scheduleFunction) {\n    Tweenable.setScheduleFunction(scheduleFunction)\n  }\n\n  /**\n   * Get and optionally set the data that gets passed as `data` to {@link\n   * shifty.promisedData}, {@link shifty.startFunction} and {@link\n   * shifty.renderFunction}.\n   * @param {Object} [data]\n   * @method Tweenable#data\n   * @return {Object} The internally stored `data`.\n   */\n  data(data = null) {\n    if (data) {\n      this._data = { ...data }\n    }\n\n    return this._data\n  }\n\n  /**\n   * `delete` all \"own\" properties.  Call this when the {@link\n   * Tweenable} instance is no longer needed to free memory.\n   * @method Tweenable#dispose\n   */\n  dispose() {\n    for (const prop in this) {\n      delete this[prop]\n    }\n  }\n}\n\n/**\n * @method shifty.tween\n * @param {shifty.tweenConfig} [config={}]\n * @description Standalone convenience method that functions identically to\n * {@link Tweenable#tween}.  You can use this to create tweens without\n * needing to set up a {@link Tweenable} instance.\n *\n * ```\n * import { tween } from 'shifty';\n *\n * tween({ from: { x: 0 }, to: { x: 10 } }).then(\n *   () => console.log('All done!')\n * );\n * ```\n *\n * @returns {Tweenable} A new {@link Tweenable} instance.\n */\nexport function tween(config = {}) {\n  const tweenable = new Tweenable()\n  tweenable.tween(config)\n\n  // This is strictly a legacy shim from when this function returned a Promise.\n  // TODO: Remove this line in the next major version\n  tweenable.tweenable = tweenable\n\n  return tweenable\n}\n\nshouldScheduleUpdate(true)\n","/** @typedef {import(\"./tweenable\").Tweenable} Tweenable */\n\nconst R_NUMBER_COMPONENT = /(\\d|-|\\.)/\nconst R_FORMAT_CHUNKS = /([^\\-0-9.]+)/g\nconst R_UNFORMATTED_VALUES = /[0-9.-]+/g\nconst R_RGBA = (() => {\n  const number = R_UNFORMATTED_VALUES.source\n  const comma = /,\\s*/.source\n\n  return new RegExp(\n    `rgba?\\\\(${number}${comma}${number}${comma}${number}(${comma}${number})?\\\\)`,\n    'g'\n  )\n})()\nconst R_RGBA_PREFIX = /^.*\\(/\nconst R_HEX = /#([0-9]|[a-f]){3,6}/gi\nconst VALUE_PLACEHOLDER = 'VAL'\n\n// HELPERS\n\n/**\n * @param {Array.number} rawValues\n * @param {string} prefix\n *\n * @return {Array.<string>}\n * @private\n */\nconst getFormatChunksFrom = (rawValues, prefix) =>\n  rawValues.map((val, i) => `_${prefix}_${i}`)\n\n/**\n * @param {string} formattedString\n *\n * @return {string}\n * @private\n */\nconst getFormatStringFrom = formattedString => {\n  let chunks = formattedString.match(R_FORMAT_CHUNKS)\n\n  if (!chunks) {\n    // chunks will be null if there were no tokens to parse in\n    // formattedString (for example, if formattedString is '2').  Coerce\n    // chunks to be useful here.\n    chunks = ['', '']\n\n    // If there is only one chunk, assume that the string is a number\n    // followed by a token...\n    // NOTE: This may be an unwise assumption.\n  } else if (\n    chunks.length === 1 ||\n    // ...or if the string starts with a number component (\".\", \"-\", or a\n    // digit)...\n    formattedString.charAt(0).match(R_NUMBER_COMPONENT)\n  ) {\n    // ...prepend an empty string here to make sure that the formatted number\n    // is properly replaced by VALUE_PLACEHOLDER\n    chunks.unshift('')\n  }\n\n  return chunks.join(VALUE_PLACEHOLDER)\n}\n\n/**\n * Convert a base-16 number to base-10.\n *\n * @param {number|string} hex The value to convert.\n *\n * @returns {number} The base-10 equivalent of `hex`.\n * @private\n */\nfunction hexToDec(hex) {\n  return parseInt(hex, 16)\n}\n\n/**\n * Convert a hexadecimal string to an array with three items, one each for\n * the red, blue, and green decimal values.\n *\n * @param {string} hex A hexadecimal string.\n *\n * @returns {Array.<number>} The converted Array of RGB values if `hex` is a\n * valid string, or an Array of three 0's.\n * @private\n */\nconst hexToRGBArray = hex => {\n  hex = hex.replace(/#/, '')\n\n  // If the string is a shorthand three digit hex notation, normalize it to\n  // the standard six digit notation\n  if (hex.length === 3) {\n    hex = hex.split('')\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2]\n  }\n\n  return [\n    hexToDec(hex.substr(0, 2)),\n    hexToDec(hex.substr(2, 2)),\n    hexToDec(hex.substr(4, 2)),\n  ]\n}\n\n/**\n * @param {string} hexString\n *\n * @return {string}\n * @private\n */\nconst convertHexToRGB = hexString =>\n  `rgb(${hexToRGBArray(hexString).join(',')})`\n\n/**\n * TODO: Can this be rewritten to leverage String#replace more efficiently?\n * Runs a filter operation on all chunks of a string that match a RegExp.\n *\n * @param {RegExp} pattern\n * @param {string} unfilteredString\n * @param {function(string)} filter\n *\n * @return {string}\n * @private\n */\nconst filterStringChunks = (pattern, unfilteredString, filter) => {\n  const patternMatches = unfilteredString.match(pattern)\n  let filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER)\n\n  if (patternMatches) {\n    patternMatches.forEach(\n      match =>\n        (filteredString = filteredString.replace(\n          VALUE_PLACEHOLDER,\n          filter(match)\n        ))\n    )\n  }\n\n  return filteredString\n}\n\n/**\n * @param {string} str\n *\n * @return {string}\n * @private\n */\nconst sanitizeHexChunksToRGB = str =>\n  filterStringChunks(R_HEX, str, convertHexToRGB)\n\n/**\n * Convert all hex color values within a string to an rgb string.\n *\n * @param {Object} stateObject\n * @private\n */\nconst sanitizeObjectForHexProps = stateObject => {\n  for (const prop in stateObject) {\n    const currentProp = stateObject[prop]\n\n    if (typeof currentProp === 'string' && currentProp.match(R_HEX)) {\n      stateObject[prop] = sanitizeHexChunksToRGB(currentProp)\n    }\n  }\n}\n\n/**\n * @param {string} rgbChunk\n *\n * @return {string}\n * @private\n */\nconst sanitizeRGBAChunk = rgbChunk => {\n  const rgbaRawValues = rgbChunk.match(R_UNFORMATTED_VALUES)\n  const rgbNumbers = rgbaRawValues.slice(0, 3).map(Math.floor)\n  const prefix = rgbChunk.match(R_RGBA_PREFIX)[0]\n\n  if (rgbaRawValues.length === 3) {\n    return `${prefix}${rgbNumbers.join(',')})`\n  } else if (rgbaRawValues.length === 4) {\n    return `${prefix}${rgbNumbers.join(',')},${rgbaRawValues[3]})`\n  }\n\n  throw new Error(`Invalid rgbChunk: ${rgbChunk}`)\n}\n\n/**\n * Check for floating point values within rgb strings and round them.\n *\n * @param {string} formattedString\n *\n * @return {string}\n * @private\n */\nconst sanitizeRGBChunks = formattedString =>\n  filterStringChunks(R_RGBA, formattedString, sanitizeRGBAChunk)\n\n/**\n * Note: It's the duty of the caller to convert the Array elements of the\n * return value into numbers.  This is a performance optimization.\n *\n * @param {string} formattedString\n *\n * @return {Array.<string>|null}\n * @private\n */\nconst getValuesFrom = formattedString =>\n  formattedString.match(R_UNFORMATTED_VALUES)\n\n/**\n * @param {Object} stateObject\n *\n * @return {Object} An Object of formatSignatures that correspond to\n * the string properties of stateObject.\n * @private\n */\nconst getFormatSignatures = stateObject => {\n  const signatures = {}\n\n  for (const propertyName in stateObject) {\n    const property = stateObject[propertyName]\n\n    if (typeof property === 'string') {\n      signatures[propertyName] = {\n        formatString: getFormatStringFrom(property),\n        chunkNames: getFormatChunksFrom(getValuesFrom(property), propertyName),\n      }\n    }\n  }\n\n  return signatures\n}\n\n/**\n * @param {Object} stateObject\n * @param {Object} formatSignatures\n * @private\n */\nconst expandFormattedProperties = (stateObject, formatSignatures) => {\n  for (const propertyName in formatSignatures) {\n    getValuesFrom(stateObject[propertyName]).forEach(\n      (number, i) =>\n        (stateObject[formatSignatures[propertyName].chunkNames[i]] = +number)\n    )\n\n    delete stateObject[propertyName]\n  }\n}\n\n/**\n * @param {Object} stateObject\n * @param {Array.<string>} chunkNames\n *\n * @return {Object} The extracted value chunks.\n * @private\n */\nconst extractPropertyChunks = (stateObject, chunkNames) => {\n  const extractedValues = {}\n\n  chunkNames.forEach(chunkName => {\n    extractedValues[chunkName] = stateObject[chunkName]\n    delete stateObject[chunkName]\n  })\n\n  return extractedValues\n}\n\n/**\n * @param {Object} stateObject\n * @param {Array.<string>} chunkNames\n *\n * @return {Array.<number>}\n * @private\n */\nconst getValuesList = (stateObject, chunkNames) =>\n  chunkNames.map(chunkName => stateObject[chunkName])\n\n/**\n * @param {string} formatString\n * @param {Array.<number>} rawValues\n *\n * @return {string}\n * @private\n */\nconst getFormattedValues = (formatString, rawValues) => {\n  rawValues.forEach(\n    rawValue =>\n      (formatString = formatString.replace(\n        VALUE_PLACEHOLDER,\n        +rawValue.toFixed(4)\n      ))\n  )\n\n  return formatString\n}\n\n/**\n * @param {Object} stateObject\n * @param {Object} formatSignatures\n * @private\n */\nconst collapseFormattedProperties = (stateObject, formatSignatures) => {\n  for (const prop in formatSignatures) {\n    const { chunkNames, formatString } = formatSignatures[prop]\n\n    const currentProp = getFormattedValues(\n      formatString,\n      getValuesList(extractPropertyChunks(stateObject, chunkNames), chunkNames)\n    )\n\n    stateObject[prop] = sanitizeRGBChunks(currentProp)\n  }\n}\n\n/**\n * @param {Object} easingObject\n * @param {Object} tokenData\n * @private\n */\nconst expandEasingObject = (easingObject, tokenData) => {\n  for (const prop in tokenData) {\n    const { chunkNames } = tokenData[prop]\n    const easing = easingObject[prop]\n\n    if (typeof easing === 'string') {\n      const easingNames = easing.split(' ')\n      const defaultEasing = easingNames[easingNames.length - 1]\n\n      chunkNames.forEach(\n        (chunkName, i) =>\n          (easingObject[chunkName] = easingNames[i] || defaultEasing)\n      )\n    } else {\n      // easing is a function\n      chunkNames.forEach(chunkName => (easingObject[chunkName] = easing))\n    }\n\n    delete easingObject[prop]\n  }\n}\n\n/**\n * @param {Object} easingObject\n * @param {Object} tokenData\n * @private\n */\nconst collapseEasingObject = (easingObject, tokenData) => {\n  for (const prop in tokenData) {\n    const { chunkNames } = tokenData[prop]\n    const firstEasing = easingObject[chunkNames[0]]\n\n    if (typeof firstEasing === 'string') {\n      easingObject[prop] = chunkNames\n        .map(chunkName => {\n          const easingName = easingObject[chunkName]\n          delete easingObject[chunkName]\n\n          return easingName\n        })\n        .join(' ')\n    } else {\n      // firstEasing is a function\n      easingObject[prop] = firstEasing\n    }\n  }\n}\n\n/**\n * @memberof Tweenable.filters.token\n * @param {Tweenable} tweenable\n * @returns {boolean}\n */\nexport const doesApply = tweenable => {\n  for (const key in tweenable._currentState) {\n    if (typeof tweenable._currentState[key] === 'string') {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * @memberof Tweenable.filters.token\n * @param {Tweenable} tweenable\n */\nexport function tweenCreated(tweenable) {\n  const { _currentState, _originalState, _targetState } = tweenable\n\n  ;[_currentState, _originalState, _targetState].forEach(\n    sanitizeObjectForHexProps\n  )\n\n  tweenable._tokenData = getFormatSignatures(_currentState)\n}\n\n/**\n * @memberof Tweenable.filters.token\n * @param {Tweenable} tweenable\n */\nexport function beforeTween(tweenable) {\n  const {\n    _currentState,\n    _originalState,\n    _targetState,\n    _easing,\n    _tokenData,\n  } = tweenable\n\n  expandEasingObject(_easing, _tokenData)\n  ;[_currentState, _originalState, _targetState].forEach(state =>\n    expandFormattedProperties(state, _tokenData)\n  )\n}\n\n/**\n * @memberof Tweenable.filters.token\n * @param {Tweenable} tweenable\n */\nexport function afterTween(tweenable) {\n  const {\n    _currentState,\n    _originalState,\n    _targetState,\n    _easing,\n    _tokenData,\n  } = tweenable\n  ;[_currentState, _originalState, _targetState].forEach(state =>\n    collapseFormattedProperties(state, _tokenData)\n  )\n\n  collapseEasingObject(_easing, _tokenData)\n}\n","import { Tweenable, composeEasingObject, tweenProps } from './tweenable'\n/** @typedef {import(\"./index\").shifty.easingFunction} shifty.easingFunction */\n\n// Fake a Tweenable and patch some internals.  This approach allows us to\n// skip uneccessary processing and object recreation, cutting down on garbage\n// collection pauses.\nconst mockTweenable = new Tweenable()\nconst { filters } = Tweenable\n\n/**\n * Compute the midpoint of two Objects.  This method effectively calculates a\n * specific frame of animation that {@link Tweenable#tween} does many times\n * over the course of a full tween.\n *\n * ```\n * import { interpolate } from 'shifty';\n *\n * const interpolatedValues = interpolate({\n *     width: '100px',\n *     opacity: 0,\n *     color: '#fff'\n *   }, {\n *     width: '200px',\n *     opacity: 1,\n *     color: '#000'\n *   },\n *   0.5\n * );\n *\n * console.log(interpolatedValues); // Logs: {opacity: 0.5, width: \"150px\", color: \"rgb(127,127,127)\"}\n * ```\n *\n * @method shifty.interpolate\n * @template T\n * @param {T} from The starting values to tween from.\n * @param {T} to The ending values to tween to.\n * @param {number} position The normalized position value (between `0.0` and\n * `1.0`) to interpolate the values between `from` and `to` for.  `from`\n * represents `0` and `to` represents `1`.\n * @param {Record<string, string | shifty.easingFunction> | string | shifty.easingFunction} easing\n * The easing curve(s) to calculate the midpoint against.  You can\n * reference any easing function attached to {@link Tweenable.formulas},\n * or provide the {@link shifty.easingFunction}(s) directly.  If omitted, this\n * defaults to \"linear\".\n * @param {number} [delay=0] Optional delay to pad the beginning of the\n * interpolated tween with.  This increases the range of `position` from (`0`\n * through `1`) to (`0` through `1 + delay`).  So, a delay of `0.5` would\n * increase all valid values of `position` to numbers between `0` and `1.5`.\n * @return {T}\n */\nexport const interpolate = (from, to, position, easing, delay = 0) => {\n  const current = { ...from }\n  const easingObject = composeEasingObject(from, easing)\n\n  mockTweenable._filters.length = 0\n\n  mockTweenable.set({})\n  mockTweenable._currentState = current\n  mockTweenable._originalState = from\n  mockTweenable._targetState = to\n  mockTweenable._easing = easingObject\n\n  for (const name in filters) {\n    if (filters[name].doesApply(mockTweenable)) {\n      mockTweenable._filters.push(filters[name])\n    }\n  }\n\n  // Any defined value transformation must be applied\n  mockTweenable._applyFilter('tweenCreated')\n  mockTweenable._applyFilter('beforeTween')\n\n  const interpolatedValues = tweenProps(\n    position,\n    current,\n    from,\n    to,\n    1,\n    delay,\n    easingObject\n  )\n\n  // Transform data in interpolatedValues back into its original format\n  mockTweenable._applyFilter('afterTween')\n\n  return interpolatedValues\n}\n","/** @typedef {import(\"./tweenable\").Tweenable} Tweenable */\n\nexport class Scene {\n  #tweenables = []\n\n  /**\n   * The {@link Scene} class provides a way to control groups of {@link\n   * Tweenable}s. It is lightweight, minimalistic, and meant to provide\n   * performant {@link Tweenable} batch control that users of Shifty\n   * might otherwise have to implement themselves. It is **not** a robust\n   * timeline solution, and it does **not** provide utilities for sophisticated\n   * animation sequencing or orchestration. If that is what you need for your\n   * project, consider using a more robust tool such as\n   * [Rekapi](http://jeremyckahn.github.io/rekapi/doc/) (a timeline layer built\n   * on top of Shifty).\n   *\n   * Please be aware that {@link Scene} does **not** perform any\n   * automatic cleanup. If you want to remove a {@link Tweenable} from a\n   * {@link Scene}, you must do so explicitly with either {@link\n   * Scene#remove} or {@link Scene#empty}.\n   *\n   * <p class=\"codepen\" data-height=\"677\" data-theme-id=\"0\" data-default-tab=\"js,result\" data-user=\"jeremyckahn\" data-slug-hash=\"qvZKbe\" style=\"height: 677px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;\" data-pen-title=\"Shifty Scene Demo\">\n   * <span>See the Pen <a href=\"https://codepen.io/jeremyckahn/pen/qvZKbe/\">\n   * Shifty Scene Demo</a> by Jeremy Kahn (<a href=\"https://codepen.io/jeremyckahn\">@jeremyckahn</a>)\n   * on <a href=\"https://codepen.io\">CodePen</a>.</span>\n   * </p>\n   * <script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\n   * @param {...Tweenable} tweenables\n   * @see https://codepen.io/jeremyckahn/pen/qvZKbe\n   * @constructs Scene\n   * @memberof shifty\n   */\n  constructor(...tweenables) {\n    tweenables.forEach(this.add.bind(this))\n  }\n\n  /**\n   * A copy of the internal {@link Tweenable}s array.\n   * @member Scene#tweenables\n   * @type {Array.<Tweenable>}\n   */\n  get tweenables() {\n    return [...this.#tweenables]\n  }\n\n  /**\n   * A list of {@link Tweenable}s in the scene that have not yet ended (playing\n   * or not).\n   * @member Scene#playingTweenables\n   * @type {Array.<Tweenable>}\n   */\n  get playingTweenables() {\n    return this.#tweenables.filter(tweenable => !tweenable.hasEnded())\n  }\n\n  /**\n   * The {@link external:Promise}s for all {@link Tweenable}s in this\n   * {@link Scene} that have been configured with {@link\n   * Tweenable#setConfig}. Note that each call of {@link\n   * Scene#play} or {@link Scene#pause} creates new {@link\n   * external:Promise}s:\n   *\n   *     const scene = new Scene(new Tweenable());\n   *     scene.play();\n   *\n   *     Promise.all(scene.promises).then(() =>\n   *       // Plays the scene again upon completion, but a new promise is\n   *       // created so this line only runs once.\n   *       scene.play()\n   *     );\n   *\n   * @member Scene#promises\n   * @type {Array.<Promise<any>>}\n   */\n  get promises() {\n    return this.#tweenables.map(tweenable => tweenable.then())\n  }\n\n  /**\n   * Add a {@link Tweenable} to be controlled by this {@link\n   * Scene}.\n   * @method Scene#add\n   * @param {Tweenable} tweenable\n   * @return {Tweenable} The {@link Tweenable} that was added.\n   */\n  add(tweenable) {\n    this.#tweenables.push(tweenable)\n\n    return tweenable\n  }\n\n  /**\n   * Remove a {@link Tweenable} that is controlled by this {@link\n   * Scene}.\n   * @method Scene#remove\n   * @param {Tweenable} tweenable\n   * @return {Tweenable} The {@link Tweenable} that was removed.\n   */\n  remove(tweenable) {\n    const index = this.#tweenables.indexOf(tweenable)\n\n    if (~index) {\n      this.#tweenables.splice(index, 1)\n    }\n\n    return tweenable\n  }\n\n  /**\n   * [Remove]{@link Scene#remove} all {@link Tweenable}s in this {@link\n   * Scene}.\n   * @method Scene#empty\n   * @return {Array.<Tweenable>} The {@link Tweenable}s that were\n   * removed.\n   */\n  empty() {\n    // Deliberate of the tweenables getter here to create a temporary array\n    return this.tweenables.map(this.remove.bind(this))\n  }\n\n  /**\n   * Is `true` if any {@link Tweenable} in this {@link Scene} is\n   * playing.\n   * @method Scene#isPlaying\n   * @return {boolean}\n   */\n  isPlaying() {\n    return this.#tweenables.some(tweenable => tweenable.isPlaying())\n  }\n\n  /**\n   * Play all {@link Tweenable}s from their beginning.\n   * @method Scene#play\n   * @return {Scene}\n   */\n  play() {\n    this.#tweenables.forEach(tweenable => tweenable.tween())\n\n    return this\n  }\n\n  /**\n   * {@link Tweenable#pause} all {@link Tweenable}s in this\n   * {@link Scene}.\n   * @method Scene#pause\n   * @return {Scene}\n   */\n  pause() {\n    this.#tweenables.forEach(tweenable => tweenable.pause())\n    return this\n  }\n\n  /**\n   * {@link Tweenable#resume} all paused {@link Tweenable}s.\n   * @method Scene#resume\n   * @return {Scene}\n   */\n  resume() {\n    this.playingTweenables.forEach(tweenable => tweenable.resume())\n\n    return this\n  }\n\n  /**\n   * {@link Tweenable#stop} all {@link Tweenable}s in this {@link\n   * Scene}.\n   * @method Scene#stop\n   * @param {boolean} [gotoEnd]\n   * @return {Scene}\n   */\n  stop(gotoEnd) {\n    this.#tweenables.forEach(tweenable => tweenable.stop(gotoEnd))\n    return this\n  }\n}\n","/**\n * @namespace shifty\n */\n\nimport {\n  processTweens,\n  shouldScheduleUpdate,\n  Tweenable,\n  tween,\n} from './tweenable'\nimport * as token from './token'\n\nTweenable.filters.token = token\n\nexport { processTweens, shouldScheduleUpdate, Tweenable, tween }\nexport { interpolate } from './interpolate'\nexport { Scene } from './scene'\nexport { setBezierFunction, unsetBezierFunction } from './bezier'\n\n/**\n * @external Promise\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise}\n */\n\n/**\n * @external thenable\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then}\n */\n\n/**\n * @callback shifty.easingFunction\n * @param {number} position The normalized (0-1) position of the tween.\n * @return {number} The curve-adjusted value.\n */\n\n/**\n * @callback shifty.startFunction\n * @param {Object} state The current state of the tween.\n * @param {Object|undefined} [data] User-defined data provided via a {@link\n * shifty.tweenConfig}.\n * @returns {void}\n */\n\n/**\n * @callback shifty.finishFunction\n * @param {shifty.promisedData} promisedData\n * @returns {void}\n */\n\n/**\n * Gets called for every tick of the tween.  This function is not called on the\n * final tick of the animation.\n * @callback shifty.renderFunction\n * @param {Object} state The current state of the tween.\n * @param {Object|undefined} data User-defined data provided via a {@link\n * shifty.tweenConfig}.\n * @param {number} timeElapsed The time elapsed since the start of the tween.\n * @returns {void}\n */\n\n/**\n * @callback shifty.scheduleFunction\n * @param {Function} callback\n * @param {number} timeout\n * @returns {void}\n */\n\n/**\n * @typedef {Object} shifty.tweenConfig\n * @property {Object} [from] Starting position.  If omitted, {@link\n * Tweenable#get} is used.\n * @property {Object} [to] Ending position.  The keys of this Object should\n * match those of `to`.\n * @property {number} [duration] How many milliseconds to animate for.\n * @property {number} [delay] How many milliseconds to wait before starting the\n * tween.\n * @property {shifty.startFunction} [start] Executes when the tween begins.\n * @property {shifty.finishFunction} [finish] Executes when the tween\n * completes. This will get overridden by {@link Tweenable#then} if that\n * is called, and it will not fire if {@link Tweenable#cancel} is\n * called.\n * @property {shifty.renderFunction} [render] Executes on every tick. Shifty\n * assumes a [retained mode](https://en.wikipedia.org/wiki/Retained_mode)\n * rendering environment, which in practice means that `render` only gets\n * called when the tween state changes. Importantly, this means that `render`\n * is _not_ called when a tween is not animating (for instance, when it is\n * paused or waiting to start via the `delay` option). This works naturally\n * with DOM environments, but you may need to account for this design in more\n * custom environments such as `<canvas>`.\n *\n * Legacy property name: `step`.\n * @property {string|shifty.easingFunction|Object<string|shifty.easingFunction>|Array.<number>} [easing]\n * - `string`: Name of the {@link Tweenable.formulas} to apply to all\n *   properties of the tween.\n * - {@link shifty.easingFunction}: A custom function that computes the rendered\n *   position of the tween for the given normalized position of the tween.\n * - `Object`: Keys are tween property names. Values are the {@link\n *   Tweenable.formulas} to be applied to each tween property, or a {@link\n *   shifty.easingFunction}. Any tween properties not included in the `Object`\n *   default to `'linear'`.\n * - `Array.<number>`: The array must contain four `number` values that\n *   correspond to the `[x1, y1, x2, y2]` values of a [Bezier\n * curve](https://cubic-bezier.com/).\n *\n * You can learn more about this in the {@tutorial\n * easing-function-in-depth} tutorial.\n * @property {Object} [data] Data that is passed to {@link\n * shifty.startFunction}, {@link shifty.renderFunction}, and {@link\n * shifty.promisedData}. Legacy property name: `attachment`.\n * @property {Function} [promise] Promise constructor for when you want\n * to use Promise library or polyfill Promises in unsupported environments.\n */\n\n/**\n * @typedef {Object} shifty.promisedData\n * @property {Object} state The current state of the tween.\n * @property {Object} data The `data` Object that the tween was configured with.\n * @property {Tweenable} tweenable The {@link Tweenable} instance to\n * which the tween belonged.\n */\n\n/**\n * Is called when a tween is created to determine if a filter is needed.\n * Filters are only added to a tween when it is created so that they are not\n * unnecessarily processed if they don't apply during an update tick.\n * @callback shifty.doesApplyFilter\n * @param {Tweenable} tweenable The {@link Tweenable} instance.\n * @return {boolean}\n */\n\n/**\n * Is called when a tween is created.  This should perform any setup needed by\n * subsequent per-tick calls to {@link shifty.beforeTween} and {@link\n * shifty.afterTween}.\n * @callback shifty.tweenCreatedFilter\n * @param {Tweenable} tweenable The {@link Tweenable} instance.\n * @returns {void}\n */\n\n/**\n * Is called right before a tween is processed in a tick.\n * @callback shifty.beforeTweenFilter\n * @param {Tweenable} tweenable The {@link Tweenable} instance.\n * @returns {void}\n */\n\n/**\n * Is called right after a tween is processed in a tick.\n * @callback shifty.afterTweenFilter\n * @param {Tweenable} tweenable The {@link Tweenable} instance.\n * @returns {void}\n */\n\n/**\n * An Object that contains functions that are called at key points in a tween's\n * lifecycle.  Shifty can only process `Number`s internally, but filters can\n * expand support for any type of data.  This is the mechanism that powers\n * [string interpolation]{@tutorial string-interpolation}.\n * @typedef {Object} shifty.filter\n * @property {shifty.doesApplyFilter} doesApply Is called when a tween is\n * created.\n * @property {shifty.tweenCreatedFilter} tweenCreated Is called when a tween is\n * created.\n * @property {shifty.beforeTweenFilter} beforeTween Is called right before a\n * tween starts.\n * @property {shifty.afterTweenFilter} afterTween Is called right after a tween\n * ends.\n */\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(720);\n"],"sourceRoot":""}