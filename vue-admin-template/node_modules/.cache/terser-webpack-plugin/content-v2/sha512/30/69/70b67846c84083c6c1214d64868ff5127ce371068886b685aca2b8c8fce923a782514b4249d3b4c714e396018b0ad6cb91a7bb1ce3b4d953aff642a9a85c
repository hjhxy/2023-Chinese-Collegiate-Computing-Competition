{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-717854c5\"],{\"007b\":function(e,t,s){\"use strict\";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"video_root\"},[\"\"==e.videoUrl?s(\"el-card\",{staticClass:\"original_video\"},[s(\"el-skeleton\",{attrs:{loading:e.loading,animated:\"\"}},[s(\"template\",{slot:\"template\"},[s(\"el-skeleton-item\",{style:{width:\"100%\",height:e.screenHeight-50+\"px\"},attrs:{variant:\"image\"}})],1),[s(\"el-upload\",{ref:\"upload\",staticClass:\"avatar-uploader\",attrs:{action:\"/dev-api/uploadvideo\",\"show-file-list\":!1,\"on-success\":e.handleSuccess,\"before-upload\":e.handleBeforeUpload,headers:{token:e.token}}},[s(\"i\",{staticClass:\"el-icon-plus avatar-uploader-icon\"})])]],2)],1):s(\"el-card\",{staticClass:\"new_video\"},[s(\"video\",{attrs:{src:e.videoUrl,autoplay:\"\",controls:\"controls\",crossOrigin:\"Anonymous\"}},[e._v(\" 您的浏览器不支持 video 标签。 \")])]),s(\"el-card\",{staticClass:\"contronal\",style:{height:e.screenHeight+\"px\"}},[s(\"div\",{staticClass:\"clearfix\",attrs:{slot:\"header\"},slot:\"header\"},[s(\"span\",{staticStyle:{\"font-size\":\"20px\",\"font-weight\":\"700\"}},[e._v(\"控制台\")]),s(\"button\",{staticClass:\"choose_button\",staticStyle:{float:\"right\",padding:\"5px\"}},[e._v(\"确认设置\")])]),s(\"el-card\",{staticClass:\"showdata\"},[s(\"div\",[s(\"b\",[e._v(\"检测用时：\")]),e._v(e._s(e.videoUrl?15:0)+\" s\")]),s(\"div\",[s(\"b\",[e._v(\"目标数：\")]),e._v(e._s(e.videoUrl?89:0))]),s(\"div\",[s(\"b\",[e._v(\"检测速度：\")]),e._v(e._s(e.videoUrl?41:0)+\" FPS\")])]),s(\"div\",{staticClass:\"showbtns\"},[s(\"div\",{staticClass:\"progress_msg\"},[s(\"div\",{staticClass:\"process_left\"},[s(\"div\",[e._v(\"NMS-IOU\")]),s(\"div\",[e._v(\"Confidence\")])]),s(\"div\",{staticClass:\"process_center\"},e._l(e.progressState,(function(e,t){return s(\"el-progress\",{key:t,attrs:{\"text-inside\":!0,\"stroke-width\":20,percentage:e.percentage,status:\"exception\"}})})),1),s(\"div\",{staticClass:\"process_right\"},e._l(e.progressState,(function(t,a){return s(\"div\",{key:a,staticClass:\"buttons\"},[s(\"span\",{on:{click:function(s){return e.subProgress(t)}}},[e._v(\"-\")]),s(\"span\",{on:{click:function(s){return e.addProgress(t)}}},[e._v(\"+\")])])})),0)]),s(\"div\",{staticClass:\"other_choose\"},[s(\"div\",{staticClass:\"choose_button el-icon-delete-solid\",on:{click:e.clearVideo}},[e._v(\"视频缓存清空\")]),s(\"div\",{staticClass:\"choose_button el-icon-download\",on:{click:function(t){e.videoUrl&&e.downVideo(e.videoUrl)}}},[e._v(\"检测视频下载\")])])])],1)],1)},i=[],o=(s(\"ac1f\"),s(\"00b4\"),s(\"a766\")),n=s(\"5f87\"),c=s(\"989b\"),r={name:\"Video\",mixins:[o[\"a\"]],ischecking:!1,data:function(){return{dialogImageUrl:\"\",dialogVisible:!1,videoUrl:\"\",loading:!1,progressState:[{id:1,percentage:30},{id:2,percentage:50}],token:\"\"}},mounted:function(){this.token=Object(n[\"a\"])()},methods:{clearVideo:function(){this.$refs.upload.clearFiles(),this.imglist=[]},handleBeforeUpload:function(e){var t=e.type;return/video/.test(t)?(this.$message({message:\"视频检测中...请稍候\",type:\"success\"}),this.loading=!0,!0):(this.$message({message:\"只能上传视频\",type:\"warning\"}),!1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleSuccess:function(e,t){this.videoUrl=\"/dev-api\"+e.url,this.$message({message:\"视频检测成功\",type:\"success\"}),this.loading=!1},subProgress:function(e){e.percentage<=0||(e.percentage-=10)},addProgress:function(e){e.percentage>=100||(e.percentage+=10)},downVideo:function(e){Object(c[\"a\"])(e)}}},d=r,l=(s(\"a67c\"),s(\"2877\")),u=Object(l[\"a\"])(d,a,i,!1,null,\"f0a3ccc8\",null);t[\"default\"]=u.exports},\"989b\":function(e,t,s){\"use strict\";s.d(t,\"b\",(function(){return a})),s.d(t,\"a\",(function(){return i}));s(\"b680\"),s(\"d3b7\"),s(\"3ca3\"),s(\"ddb0\"),s(\"2b3d\"),s(\"9861\");function a(e,t){var s=e,a=new Image;a.setAttribute(\"crossOrigin\",\"anonymous\"),a.onload=function(){var e=document.createElement(\"canvas\");e.width=a.width,e.height=a.height;var s=e.getContext(\"2d\");s.drawImage(a,0,0,a.width,a.height);var i=e.toDataURL(\"image/png\"),o=document.createElement(\"a\");o.download=t,o.href=i,o.click()},a.src=s}function i(e){var t=new XMLHttpRequest;t.open(\"GET\",e,!0),t.addEventListener(\"progress\",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;console.log((100*t).toFixed(2)+\"%\")}}),!1),t.responseType=\"blob\",t.onload=function(){if(4===t.readyState&&200===t.status){var s=this.response,a=window.URL.createObjectURL(new Blob([s],{type:\"video/mp4\"})),i=document.createElement(\"a\");i.download=e,i.href=a,i.style.display=\"none\",document.body.appendChild(i),i.click(),i.remove()}},t.send()}},9982:function(e,t,s){},a67c:function(e,t,s){\"use strict\";s(\"9982\")},a766:function(e,t,s){\"use strict\";var a=s(\"5530\"),i=s(\"2f62\");t[\"a\"]={computed:Object(a[\"a\"])({},Object(i[\"b\"])(\"device\",[\"screenHeight\",\"screenWidth\"]))}}}]);","extractedComments":[]}