{"remainingRequest":"E:\\aproject\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\aproject\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\aproject\\vue-admin-template\\src\\views\\index\\video\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\aproject\\vue-admin-template\\src\\views\\index\\video\\index.vue","mtime":1682433062555},{"path":"E:\\aproject\\vue-admin-template\\babel.config.js","mtime":1680534710653},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680534835386},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1680534836652},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680534835386},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1680534837350}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgZGV2aWNlTWl4aW4gZnJvbSAnQC9taXhpbnMvZGV2aWNlJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1ZpZGVvJywKICBtaXhpbnM6IFtkZXZpY2VNaXhpbl0sCiAgaXNjaGVja2luZzogZmFsc2UsCiAgLy8g5q2j5Zyo5LiK5Lyg5qOA5rWLCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHZpZGVvVXJsOiAnJywKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgcHJvZ3Jlc3NTdGF0ZTogW3sKICAgICAgICBpZDogMSwKICAgICAgICBwZXJjZW50YWdlOiA1MAogICAgICB9LCB7CiAgICAgICAgaWQ6IDIsCiAgICAgICAgcGVyY2VudGFnZTogODAKICAgICAgfSwgewogICAgICAgIGlkOiAzLAogICAgICAgIHBlcmNlbnRhZ2U6IDkwCiAgICAgIH1dLAogICAgICB0b2tlbjogJycKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy50b2tlbiA9IGdldFRva2VuKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVCZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZUJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHZhciB0eXBlID0gZmlsZS50eXBlOwogICAgICBpZiAoL3ZpZGVvLy50ZXN0KHR5cGUpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgn5LiK5Lyg5oiQ5Yqf77yM6KeG6aKR5qOA5rWL5LitLi4uLi4uJyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn5Y+q6IO95LiK5Lyg6KeG6aKRJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVN1Y2Nlc3MocmVzLCBmaWxlKSB7CiAgICAgIHRoaXMudmlkZW9VcmwgPSAnL2Rldi1hcGknICsgcmVzLnVybDsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogJ+inhumikeajgOa1i+aIkOWKnycsCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgIH0pOwogICAgfSwKICAgIHN1YlByb2dyZXNzOiBmdW5jdGlvbiBzdWJQcm9ncmVzcyhpdGVtKSB7CiAgICAgIGlmIChpdGVtLnBlcmNlbnRhZ2UgPD0gMCkgcmV0dXJuOwogICAgICBpdGVtLnBlcmNlbnRhZ2UgLT0gMTA7CiAgICB9LAogICAgYWRkUHJvZ3Jlc3M6IGZ1bmN0aW9uIGFkZFByb2dyZXNzKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0ucGVyY2VudGFnZSA+PSAxMDApIHJldHVybjsKICAgICAgaXRlbS5wZXJjZW50YWdlICs9IDEwOwogICAgfSwKICAgIGRvd25WaWRlbzogZnVuY3Rpb24gZG93blZpZGVvKHVybCkgewogICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpOwogICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgaWYgKG9iai5sZW5ndGhDb21wdXRhYmxlKSB7CiAgICAgICAgICB2YXIgcGVyY2VudENvbXBsZXRlID0gb2JqLmxvYWRlZCAvIG9iai50b3RhbDsKICAgICAgICAgIGNvbnNvbGUubG9nKChwZXJjZW50Q29tcGxldGUgKiAxMDApLnRvRml4ZWQoMikgKyAnJScpOwogICAgICAgICAgLy8g5Y+v5b6X5Yiw5LiL6L296L+b5bqmCiAgICAgICAgfQogICAgICB9LCBmYWxzZSk7CiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7IC8vIOiuvue9rui/lOWbnuexu+Wei2Jsb2IKICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQgJiYgeGhyLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB2YXIgYmxvYiA9IHRoaXMucmVzcG9uc2U7CiAgICAgICAgICAvLyDovazmjaLkuIDkuKpibG9i6ZO+5o6lCiAgICAgICAgICB2YXIgdSA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtibG9iXSwgewogICAgICAgICAgICB0eXBlOiAndmlkZW8vbXA0JwogICAgICAgICAgfSkpOwogICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICBhLmRvd25sb2FkID0gdXJsOyAvLyDov5nph4zmmK/mlofku7blkI3np7DvvIzov5nph4zmmoLml7bnlKjpk77mjqXku6Pmm7/vvIzlj6/ku6Xmm7/mjaIKICAgICAgICAgIGEuaHJlZiA9IHU7CiAgICAgICAgICBhLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgYS5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHhoci5zZW5kKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["deviceMixin","getToken","name","mixins","ischecking","data","dialogImageUrl","dialogVisible","videoUrl","loading","progressState","id","percentage","token","mounted","methods","handleBeforeUpload","file","type","test","$message","message","handlePictureCardPreview","url","handleSuccess","res","subProgress","item","addProgress","downVideo","xhr","XMLHttpRequest","open","addEventListener","obj","lengthComputable","percentComplete","loaded","total","console","log","toFixed","responseType","onload","readyState","status","blob","response","u","window","URL","createObjectURL","Blob","a","document","createElement","download","href","style","display","body","appendChild","click","remove","send"],"sources":["src/views/index/video/index.vue"],"sourcesContent":["<template>\n  <div class=\"video_root\">\n    <!-- 左侧原视频   -->\n    <el-card v-if=\"videoUrl==''\" class=\"original_video\">\n      <el-skeleton style=\"width: 240px\" :loading=\"loading\" animated>\n        <template slot=\"template\">\n          <el-skeleton-item\n            variant=\"image\"\n            style=\"width: 240px; height: 240px;\"\n          />\n        </template>\n        <template>\n          12\n        </template>\n      </el-skeleton>\n<!--      <el-upload-->\n<!--        class=\"avatar-uploader\"-->\n<!--        action=\"/dev-api/uploadvideo\"-->\n<!--        :show-file-list=\"false\"-->\n<!--        :on-success=\"handleSuccess\"-->\n<!--        :before-upload=\"handleBeforeUpload\"-->\n<!--        :headers=\"{token:token}\"-->\n<!--      >-->\n<!--        <i class=\"el-icon-plus avatar-uploader-icon\" />-->\n<!--      </el-upload>-->\n    </el-card>\n    <!--    左侧模型-->\n    <el-card v-else class=\"new_video\">\n      <video :src=\"videoUrl\" autoplay controls=\"controls\" crossOrigin=\"Anonymous\">\n        您的浏览器不支持 video 标签。\n      </video>\n    </el-card>\n    <!--    控制台-->\n    <el-card class=\"contronal\" :style=\"{height:screenHeight+'px'}\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span style=\"font-size: 20px;font-weight: 700\">控制台</span>\n        <el-button style=\"float: right; padding: 3px 0\" type=\"text\">下载数据集</el-button>\n      </div>\n      <el-card class=\"showdata\">\n        <div><b>检测数：</b>{{ 100 }}</div>\n        <div><b>目标数：</b>{{ 100 }}</div>\n        <div><b>帧率：</b>{{ 212 }} fps</div>\n      </el-card>\n      <div class=\"showbtns\">\n        <div class=\"progress_msg\">\n          <div class=\"process_left\">\n            <div>IoU</div>\n            <div>置信度</div>\n            <div>帧间延迟</div>\n          </div>\n          <div class=\"process_center\">\n            <el-progress v-for=\"(item,index) in progressState\" :key=\"index\" :text-inside=\"true\" :stroke-width=\"20\" :percentage=\"item.percentage\" status=\"exception\" />\n          </div>\n          <div class=\"process_right\">\n            <div v-for=\"(item,index) in progressState\" :key=\"index\" class=\"buttons\">\n              <span @click=\"subProgress(item)\">-</span>\n              <span @click=\"addProgress(item)\">+</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"other_choose\">\n          <div class=\"choose_button el-icon-upload2\">上传视频</div>\n          <div class=\"choose_button el-icon-download\" @click=\"videoUrl&&downVideo(videoUrl)\">下载模型</div>\n        </div>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport deviceMixin from '@/mixins/device'\nimport { getToken } from '@/utils/auth'\nexport default {\n  name: 'Video',\n  mixins: [deviceMixin],\n  ischecking: false, // 正在上传检测\n  data() {\n    return {\n      dialogImageUrl: '',\n      dialogVisible: false,\n      videoUrl: '',\n      loading: true,\n      progressState: [{\n        id: 1,\n        percentage: 50\n      }, {\n        id: 2,\n        percentage: 80\n      }, {\n        id: 3,\n        percentage: 90\n      }],\n      token: ''\n    }\n  },\n  mounted() {\n    this.token = getToken()\n  },\n  methods: {\n    handleBeforeUpload(file) {\n      const { type } = file\n      if (/video/.test(type)) {\n        this.$message('上传成功，视频检测中......')\n        return true\n      } else {\n        this.$message({\n          message: '只能上传视频',\n          type: 'warning'\n        })\n        return false\n      }\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url\n      this.dialogVisible = true\n    },\n    handleSuccess(res, file) {\n      this.videoUrl = '/dev-api' + res.url\n      this.$message({\n        message: '视频检测成功',\n        type: 'success'\n      })\n    },\n    subProgress(item) {\n      if (item.percentage <= 0) return\n      item.percentage -= 10\n    },\n    addProgress(item) {\n      if (item.percentage >= 100) return\n      item.percentage += 10\n    },\n    downVideo(url) {\n      const xhr = new XMLHttpRequest()\n      xhr.open('GET', url, true)\n      xhr.addEventListener('progress', function(obj) {\n        if (obj.lengthComputable) {\n          const percentComplete = obj.loaded / obj.total\n          console.log((percentComplete * 100).toFixed(2) + '%')\n          // 可得到下载进度\n        }\n      }, false)\n      xhr.responseType = 'blob' // 设置返回类型blob\n      xhr.onload = function() {\n        if (xhr.readyState === 4 && xhr.status === 200) {\n          const blob = this.response\n          // 转换一个blob链接\n          const u = window.URL.createObjectURL(new Blob([blob], {\n            type: 'video/mp4'\n          }))\n          const a = document.createElement('a')\n          a.download = url // 这里是文件名称，这里暂时用链接代替，可以替换\n          a.href = u\n          a.style.display = 'none'\n          document.body.appendChild(a)\n          a.click()\n          a.remove()\n        }\n      }\n      xhr.send()\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.avatar-uploader-icon {\n  border: 1px dashed #d9d9d9;\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n .avatar-uploader-icon:hover {\n  border-color: #409EFF;\n}\n\n .video_root{\n   display: flex;\n   width: 100%;\n   .original_video{\n     flex: 1;\n   }\n   .new_video{\n     flex: 1;\n   }\n   .contronal{\n     width: 400px;\n     height: 100%;\n     overflow: auto;\n     margin-left: 10px;\n     .showdata{\n       border-radius: 10px;\n       margin-bottom: 20px;\n       background-color: #8ee8f8;\n       box-shadow: 1px 5px 5px 2px #20a0ff;\n       div {\n         width: 100%;\n         margin: 6px 0;\n       }\n     }\n     .showbtns{\n       .progress_msg{\n         width: 100%;\n         display: flex;\n         .process_left{\n           width: 60px;\n           font-size: 14px;\n           div {\n             margin: 6px 0;\n             line-height: 20px;\n           }\n         }\n         .process_center{\n           flex: 1;\n         }\n         .process_right{\n           width: 84px;\n           .buttons{\n             box-sizing: border-box;\n             line-height: 20px;\n             margin: 6px 0;\n             span {\n               display: inline-block;\n               margin: 0 5px;\n               text-align: center;\n               width: 30px;\n               cursor: pointer;\n               background-color: #0173e7;\n               border-radius: 5px;\n               color: #fff;\n               &:hover {\n                 background-color: #1687ff;\n               }\n             }\n           }\n         }\n       }\n\n       .other_choose{\n         margin: 10px 0px;\n         display: flex;\n         flex-wrap: wrap;\n         .choose_button{\n           margin:20px 30px 0px 0px;\n         }\n       }\n\n       .el-progress{\n         margin: 6px;\n       }\n     }\n   }\n }\n video{\n   width: 100%;\n }\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,OAAAA,WAAA;AACA,SAAAC,QAAA;AACA;EACAC,IAAA;EACAC,MAAA,GAAAH,WAAA;EACAI,UAAA;EAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,cAAA;MACAC,aAAA;MACAC,QAAA;MACAC,OAAA;MACAC,aAAA;QACAC,EAAA;QACAC,UAAA;MACA;QACAD,EAAA;QACAC,UAAA;MACA;QACAD,EAAA;QACAC,UAAA;MACA;MACAC,KAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAD,KAAA,GAAAZ,QAAA;EACA;EACAc,OAAA;IACAC,kBAAA,WAAAA,mBAAAC,IAAA;MACA,IAAAC,IAAA,GAAAD,IAAA,CAAAC,IAAA;MACA,YAAAC,IAAA,CAAAD,IAAA;QACA,KAAAE,QAAA;QACA;MACA;QACA,KAAAA,QAAA;UACAC,OAAA;UACAH,IAAA;QACA;QACA;MACA;IACA;IACAI,wBAAA,WAAAA,yBAAAL,IAAA;MACA,KAAAX,cAAA,GAAAW,IAAA,CAAAM,GAAA;MACA,KAAAhB,aAAA;IACA;IACAiB,aAAA,WAAAA,cAAAC,GAAA,EAAAR,IAAA;MACA,KAAAT,QAAA,gBAAAiB,GAAA,CAAAF,GAAA;MACA,KAAAH,QAAA;QACAC,OAAA;QACAH,IAAA;MACA;IACA;IACAQ,WAAA,WAAAA,YAAAC,IAAA;MACA,IAAAA,IAAA,CAAAf,UAAA;MACAe,IAAA,CAAAf,UAAA;IACA;IACAgB,WAAA,WAAAA,YAAAD,IAAA;MACA,IAAAA,IAAA,CAAAf,UAAA;MACAe,IAAA,CAAAf,UAAA;IACA;IACAiB,SAAA,WAAAA,UAAAN,GAAA;MACA,IAAAO,GAAA,OAAAC,cAAA;MACAD,GAAA,CAAAE,IAAA,QAAAT,GAAA;MACAO,GAAA,CAAAG,gBAAA,uBAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,gBAAA;UACA,IAAAC,eAAA,GAAAF,GAAA,CAAAG,MAAA,GAAAH,GAAA,CAAAI,KAAA;UACAC,OAAA,CAAAC,GAAA,EAAAJ,eAAA,QAAAK,OAAA;UACA;QACA;MACA;MACAX,GAAA,CAAAY,YAAA;MACAZ,GAAA,CAAAa,MAAA;QACA,IAAAb,GAAA,CAAAc,UAAA,UAAAd,GAAA,CAAAe,MAAA;UACA,IAAAC,IAAA,QAAAC,QAAA;UACA;UACA,IAAAC,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAAC,eAAA,KAAAC,IAAA,EAAAN,IAAA;YACA5B,IAAA;UACA;UACA,IAAAmC,CAAA,GAAAC,QAAA,CAAAC,aAAA;UACAF,CAAA,CAAAG,QAAA,GAAAjC,GAAA;UACA8B,CAAA,CAAAI,IAAA,GAAAT,CAAA;UACAK,CAAA,CAAAK,KAAA,CAAAC,OAAA;UACAL,QAAA,CAAAM,IAAA,CAAAC,WAAA,CAAAR,CAAA;UACAA,CAAA,CAAAS,KAAA;UACAT,CAAA,CAAAU,MAAA;QACA;MACA;MACAjC,GAAA,CAAAkC,IAAA;IACA;EACA;AACA"}]}