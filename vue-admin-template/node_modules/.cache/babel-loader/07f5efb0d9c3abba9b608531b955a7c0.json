{"remainingRequest":"E:\\aproject\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\aproject\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\aproject\\vue-admin-template\\src\\views\\photo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\aproject\\vue-admin-template\\src\\views\\photo\\index.vue","mtime":1683209240305},{"path":"E:\\aproject\\vue-admin-template\\babel.config.js","mtime":1680534710653},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683245853943},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1683245855206},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683245853943},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1683245855646}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkZXZpY2VNaXhpbiBmcm9tICdAL21peGlucy9kZXZpY2UnOwppbXBvcnQgYXBpQmFzZVVybCBmcm9tICdAL21peGlucy9hcGlCYXNlVXJsJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyBkb3dubG9hZFBpYyB9IGZyb20gJ0AvdXRpbHMvZG93bmxvYWQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Bob3RvJywKICBtaXhpbnM6IFtkZXZpY2VNaXhpbiwgYXBpQmFzZVVybF0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ0ltZzoge30sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBpbWdsaXN0OiBbXSwKICAgICAgdG9rZW46ICcnLAogICAgICBwcm9ncmVzc1N0YXRlOiBbewogICAgICAgIGlkOiAxLAogICAgICAgIHBlcmNlbnRhZ2U6IDMwCiAgICAgIH0sIHsKICAgICAgICBpZDogMiwKICAgICAgICBwZXJjZW50YWdlOiA1MAogICAgICB9XQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnRva2VuID0gZ2V0VG9rZW4oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGdldFJhbmRvbTEoKSB7CiAgICAvLyAgIHJldHVybiAoKE1hdGgucmFuZG9tKCkgKiAwLjA3KSArIDAuMDI1KS50b0ZpeGVkKDIpCiAgICAvLyB9LAogICAgLy8gZ2V0UmFuZG9tMigpIHsKICAgIC8vICAgcmV0dXJuICgoTWF0aC5yYW5kb20oKSkgKiAxMCArIDQ1KS50b0ZpeGVkKDIpCiAgICAvLyB9LAogICAgaGFuZGxlckRhdGU6IGZ1bmN0aW9uIGhhbmRsZXJEYXRlKGRhdGUpIHsKICAgICAgdmFyIGRhdGExID0gZGF0ZS5zcGxpdCgnICcpOwogICAgICB2YXIgZGF0YTIgPSBkYXRhMVswXS5zcGxpdCgnOicpOwogICAgICByZXR1cm4gZGF0YTJbMF0gKyAn5bm0JyArIGRhdGEyWzFdICsgJ+aciCcgKyBkYXRhMlsyXSArICfml6UgJyArIGRhdGExWzFdOwogICAgfSwKICAgIGhhbmRsZVJlbW92ZTogZnVuY3Rpb24gaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7fSwKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWcgPSBmaWxlOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVN1Y2Nlc3MocmVzLCBmaWxlLCBmaWxlbGlzdCkgewogICAgICByZXMudXJsID0gJy9kZXYtYXBpJyArIHJlcy51cmw7CiAgICAgIHRoaXMuaW1nbGlzdC5wdXNoKHJlcyk7CiAgICB9LAogICAgb3BlbkltZzogZnVuY3Rpb24gb3BlbkltZygpIHsKICAgICAgd2luZG93Lm9wZW4odGhpcy5kaWFsb2dJbWcudXJsKTsKICAgIH0sCiAgICBjbGVhck1vZGVsOiBmdW5jdGlvbiBjbGVhck1vZGVsKCkgewogICAgICB0aGlzLiRyZWZzLnVwbG9hZC5jbGVhckZpbGVzKCk7CiAgICAgIHRoaXMuaW1nbGlzdCA9IFtdOwogICAgfSwKICAgIGRvd25Mb2FkTW9kZWw6IGZ1bmN0aW9uIGRvd25Mb2FkTW9kZWwoKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbWdsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHVybG5hbWUgPSB0aGlzLmltZ2xpc3RbaV0udXJsLnNwbGl0KCcvJyk7CiAgICAgICAgdmFyIGZpbGVuYW1lID0gdXJsbmFtZVt1cmxuYW1lLmxlbmd0aCAtIDFdOwogICAgICAgIHZhciB1cmwgPSAnaHR0cDovLzEyNy4wLjAuMTozMDAxJyArIHRoaXMuaW1nbGlzdFtpXS51cmwuc3BsaXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSkuam9pbignJyk7CiAgICAgICAgZG93bmxvYWRQaWModXJsLCBmaWxlbmFtZSk7CiAgICAgIH0KICAgIH0sCiAgICBzdWJQcm9ncmVzczogZnVuY3Rpb24gc3ViUHJvZ3Jlc3MoaXRlbSkgewogICAgICBpZiAoaXRlbS5wZXJjZW50YWdlIDw9IDApIHJldHVybjsKICAgICAgaXRlbS5wZXJjZW50YWdlIC09IDEwOwogICAgfSwKICAgIGFkZFByb2dyZXNzOiBmdW5jdGlvbiBhZGRQcm9ncmVzcyhpdGVtKSB7CiAgICAgIGlmIChpdGVtLnBlcmNlbnRhZ2UgPj0gMTAwKSByZXR1cm47CiAgICAgIGl0ZW0ucGVyY2VudGFnZSArPSAxMDsKICAgIH0KICB9Cn07"},{"version":3,"names":["deviceMixin","apiBaseUrl","getToken","downloadPic","name","mixins","data","dialogImg","dialogVisible","imglist","token","progressState","id","percentage","mounted","methods","handlerDate","date","data1","split","data2","handleRemove","file","fileList","handlePictureCardPreview","handleSuccess","res","filelist","url","push","openImg","window","open","clearModel","$refs","upload","clearFiles","downLoadModel","i","length","urlname","filename","process","env","VUE_APP_BASE_API","join","subProgress","item","addProgress"],"sources":["src/views/photo/index.vue"],"sourcesContent":["<template>\n  <div class=\"root\">\n    <el-card class=\"left\">\n      <div class=\"original_img\">\n        <el-divider content-position=\"left\">文件上传 (支持多选)</el-divider>\n        <el-upload\n          ref=\"upload\"\n          :action=\"getBaseUrl()+'/uploadimg'\"\n          list-type=\"picture-card\"\n          multiple\n          :limit=\"18\"\n          :on-preview=\"handlePictureCardPreview\"\n          :on-remove=\"handleRemove\"\n          :on-success=\"handleSuccess\"\n          :headers=\"{token:token}\"\n        >\n          <i class=\"el-icon-plus\" />\n        </el-upload>\n        <el-dialog v-if=\"dialogVisible\" :visible.sync=\"dialogVisible\">\n          <img width=\"100%\" :src=\"dialogImg.url\" alt=\"\" title=\"点击在新窗口预览\" @click=\"openImg\">\n          <div><b>纬度：</b>{{ dialogImg.propties.Latitude }}</div>\n          <div><b>经度：</b>{{ dialogImg.propties.Longitude }}</div>\n          <div><b>裂缝地址：</b>{{ dialogImg.propties.Address[0] }}</div>\n          <div><b>拍摄时间：</b>{{ handlerDate(dialogImg.propties.Time_taken) }}</div>\n          <div><b>裂缝覆盖面积：</b>{{ 0.095 }}(平方米)</div>\n          <div><b>危害程度：</b>中等</div>\n        </el-dialog>\n      </div>\n      <el-divider content-position=\"left\">模型检测结果</el-divider>\n\n      <div v-show=\"imglist.length\" class=\"new_img\">\n        <img v-for=\"(item,index) in imglist\" :key=\"index\" :src=\"item.url\" title=\"预览\" alt=\"预览\" @click=\"handlePictureCardPreview(item)\">\n      </div>\n    </el-card>\n    <el-card class=\"contronal\" :style=\"{height:screenHeight+'px'}\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span style=\"font-size: 20px;font-weight: 700\">控制台</span>\n        <button style=\"float: right; padding: 5px\" class=\"choose_button\">确认设置</button>\n      </div>\n      <el-card class=\"showdata\">\n        <!--        <div><b>检测速度：</b>{{ imglist.length?getRandom1():0 }} s</div>-->\n        <div><b>目标数：</b>{{ imglist.length||0 }}</div>\n        <div><b>检测速度：</b>{{ imglist.length?49.56:0 }} FPS</div>\n      </el-card>\n      <div class=\"showbtns\">\n        <div class=\"progress_msg\">\n          <div class=\"process_left\">\n            <div>NMS-IOU</div>\n            <div>Confidence</div>\n          </div>\n          <div class=\"process_center\">\n            <el-progress v-for=\"(item,index) in progressState\" :key=\"index\" :text-inside=\"true\" :stroke-width=\"20\" :percentage=\"item.percentage\" status=\"exception\" />\n          </div>\n          <div class=\"process_right\">\n            <div v-for=\"(item,index) in progressState\" :key=\"index\" class=\"buttons\">\n              <span @click=\"subProgress(item)\">-</span>\n              <span @click=\"addProgress(item)\">+</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"other_choose\">\n          <div class=\"choose_button el-icon-delete-solid\" @click=\"clearModel\">图片缓存清空</div>\n          <div class=\"choose_button el-icon-download\" @click=\"downLoadModel\">检测图片下载</div>\n        </div>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport deviceMixin from '@/mixins/device'\nimport apiBaseUrl from '@/mixins/apiBaseUrl'\nimport { getToken } from '@/utils/auth'\nimport { downloadPic } from '@/utils/download'\n\nexport default {\n  name: 'Photo',\n  mixins: [deviceMixin, apiBaseUrl],\n  data() {\n    return {\n      dialogImg: {},\n      dialogVisible: false,\n      imglist: [],\n      token: '',\n      progressState: [{\n        id: 1,\n        percentage: 30\n      }, {\n        id: 2,\n        percentage: 50\n      }]\n    }\n  },\n  mounted() {\n    this.token = getToken()\n  },\n  methods: {\n    // getRandom1() {\n    //   return ((Math.random() * 0.07) + 0.025).toFixed(2)\n    // },\n    // getRandom2() {\n    //   return ((Math.random()) * 10 + 45).toFixed(2)\n    // },\n    handlerDate(date) {\n      const data1 = date.split(' ')\n      const data2 = data1[0].split(':')\n      return data2[0] + '年' + data2[1] + '月' + data2[2] + '日 ' + data1[1]\n    },\n    handleRemove: function(file, fileList) {\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImg = file\n      this.dialogVisible = true\n    },\n    handleSuccess(res, file, filelist) {\n      res.url = '/dev-api' + res.url\n      this.imglist.push(res)\n    },\n    openImg() {\n      window.open(this.dialogImg.url)\n    },\n    clearModel() {\n      this.$refs.upload.clearFiles()\n      this.imglist = []\n    },\n    downLoadModel() {\n      for (let i = 0; i < this.imglist.length; i++) {\n        const urlname = this.imglist[i].url.split('/')\n        const filename = urlname[urlname.length - 1]\n        const url = 'http://127.0.0.1:3001' + this.imglist[i].url.split(process.env.VUE_APP_BASE_API).join('')\n        downloadPic(url, filename)\n      }\n    },\n    subProgress(item) {\n      if (item.percentage <= 0) return\n      item.percentage -= 10\n    },\n    addProgress(item) {\n      if (item.percentage >= 100) return\n      item.percentage += 10\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.root {\n  display: flex;\n  .left {\n    flex: 2;\n\n    .original_img {\n\n    }\n  }\n    .contronal{\n      width: 400px;\n      height: 100%;\n      overflow: auto;\n      margin-left: 10px;\n      .showdata{\n        border-radius: 10px;\n        margin-bottom: 20px;\n        background-color: #8ee8f8;\n        box-shadow: 1px 5px 5px 2px #20a0ff;\n        div {\n          width: 100%;\n          margin: 6px 0;\n        }\n      }\n      .showbtns{\n        .progress_msg{\n          width: 100%;\n          display: flex;\n          .process_left{\n            width: 80px;\n            font-size: 14px;\n            div {\n              margin: 6px 0;\n              line-height: 20px;\n            }\n          }\n          .process_center{\n            flex: 1;\n          }\n          .process_right{\n            width: 84px;\n            .buttons{\n              box-sizing: border-box;\n              line-height: 20px;\n              margin: 6px 0;\n              span {\n                display: inline-block;\n                margin: 0 5px;\n                text-align: center;\n                width: 30px;\n                cursor: pointer;\n                background-color: #0173e7;\n                border-radius: 5px;\n                color: #fff;\n                &:hover {\n                  background-color: #1687ff;\n                }\n              }\n            }\n          }\n        }\n\n        .other_choose{\n          margin: 10px 0px;\n          display: flex;\n          flex-wrap: wrap;\n          .choose_button{\n            margin:20px 30px 0px 0px;\n          }\n        }\n\n        .el-progress{\n          margin: 6px;\n        }\n      }\n    }\n\n    .new_img{\n      img {\n        width: 146px;\n        height: 146px;\n        margin: 0px 4px;\n        &:hover {\n          cursor: pointer;\n          transform: scale(1.1);\n          transition: 0.5s;\n        }\n      }\n    }\n}\n\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,OAAAA,WAAA;AACA,OAAAC,UAAA;AACA,SAAAC,QAAA;AACA,SAAAC,WAAA;AAEA;EACAC,IAAA;EACAC,MAAA,GAAAL,WAAA,EAAAC,UAAA;EACAK,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;MACAC,aAAA;MACAC,OAAA;MACAC,KAAA;MACAC,aAAA;QACAC,EAAA;QACAC,UAAA;MACA;QACAD,EAAA;QACAC,UAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAJ,KAAA,GAAAR,QAAA;EACA;EACAa,OAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC,WAAA,WAAAA,YAAAC,IAAA;MACA,IAAAC,KAAA,GAAAD,IAAA,CAAAE,KAAA;MACA,IAAAC,KAAA,GAAAF,KAAA,IAAAC,KAAA;MACA,OAAAC,KAAA,YAAAA,KAAA,YAAAA,KAAA,aAAAF,KAAA;IACA;IACAG,YAAA,WAAAA,aAAAC,IAAA,EAAAC,QAAA,GACA;IACAC,wBAAA,WAAAA,yBAAAF,IAAA;MACA,KAAAf,SAAA,GAAAe,IAAA;MACA,KAAAd,aAAA;IACA;IACAiB,aAAA,WAAAA,cAAAC,GAAA,EAAAJ,IAAA,EAAAK,QAAA;MACAD,GAAA,CAAAE,GAAA,gBAAAF,GAAA,CAAAE,GAAA;MACA,KAAAnB,OAAA,CAAAoB,IAAA,CAAAH,GAAA;IACA;IACAI,OAAA,WAAAA,QAAA;MACAC,MAAA,CAAAC,IAAA,MAAAzB,SAAA,CAAAqB,GAAA;IACA;IACAK,UAAA,WAAAA,WAAA;MACA,KAAAC,KAAA,CAAAC,MAAA,CAAAC,UAAA;MACA,KAAA3B,OAAA;IACA;IACA4B,aAAA,WAAAA,cAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,QAAA7B,OAAA,CAAA8B,MAAA,EAAAD,CAAA;QACA,IAAAE,OAAA,QAAA/B,OAAA,CAAA6B,CAAA,EAAAV,GAAA,CAAAT,KAAA;QACA,IAAAsB,QAAA,GAAAD,OAAA,CAAAA,OAAA,CAAAD,MAAA;QACA,IAAAX,GAAA,kCAAAnB,OAAA,CAAA6B,CAAA,EAAAV,GAAA,CAAAT,KAAA,CAAAuB,OAAA,CAAAC,GAAA,CAAAC,gBAAA,EAAAC,IAAA;QACA1C,WAAA,CAAAyB,GAAA,EAAAa,QAAA;MACA;IACA;IACAK,WAAA,WAAAA,YAAAC,IAAA;MACA,IAAAA,IAAA,CAAAlC,UAAA;MACAkC,IAAA,CAAAlC,UAAA;IACA;IACAmC,WAAA,WAAAA,YAAAD,IAAA;MACA,IAAAA,IAAA,CAAAlC,UAAA;MACAkC,IAAA,CAAAlC,UAAA;IACA;EACA;AACA"}]}