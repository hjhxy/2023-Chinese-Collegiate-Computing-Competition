{"remainingRequest":"E:\\aproject\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\aproject\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\aproject\\vue-admin-template\\src\\views\\photo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\aproject\\vue-admin-template\\src\\views\\photo\\index.vue","mtime":1682778459804},{"path":"E:\\aproject\\vue-admin-template\\babel.config.js","mtime":1680534710653},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680534835386},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1680534836652},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680534835386},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1680534837350}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkZXZpY2VNaXhpbiBmcm9tICdAL21peGlucy9kZXZpY2UnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IGRvd25sb2FkUGljIH0gZnJvbSAnQC91dGlscy9kb3dubG9hZCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGhvdG8nLAogIG1peGluczogW2RldmljZU1peGluXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nSW1nOiB7fSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGltZ2xpc3Q6IFtdLAogICAgICB0b2tlbjogJycKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy50b2tlbiA9IGdldFRva2VuKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRSYW5kb20xOiBmdW5jdGlvbiBnZXRSYW5kb20xKCkgewogICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgKiAwLjA3ICsgMC4wMjUpLnRvRml4ZWQoMik7CiAgICB9LAogICAgZ2V0UmFuZG9tMjogZnVuY3Rpb24gZ2V0UmFuZG9tMigpIHsKICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9GaXhlZCgyKTsKICAgIH0sCiAgICBoYW5kbGVyRGF0ZTogZnVuY3Rpb24gaGFuZGxlckRhdGUoZGF0ZSkgewogICAgICB2YXIgZGF0YTEgPSBkYXRlLnNwbGl0KCcgJyk7CiAgICAgIHZhciBkYXRhMiA9IGRhdGExWzBdLnNwbGl0KCc6Jyk7CiAgICAgIHJldHVybiBkYXRhMlswXSArICflubQnICsgZGF0YTJbMV0gKyAn5pyIJyArIGRhdGEyWzJdICsgJ+aXpSAnICsgZGF0YTFbMV07CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHt9LAogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICB0aGlzLmRpYWxvZ0ltZyA9IGZpbGU7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlU3VjY2VzcyhyZXMsIGZpbGUsIGZpbGVsaXN0KSB7CiAgICAgIHJlcy51cmwgPSAnL2Rldi1hcGknICsgcmVzLnVybDsKICAgICAgdGhpcy5pbWdsaXN0LnB1c2gocmVzKTsKICAgIH0sCiAgICBvcGVuSW1nOiBmdW5jdGlvbiBvcGVuSW1nKCkgewogICAgICB3aW5kb3cub3Blbih0aGlzLmRpYWxvZ0ltZy51cmwpOwogICAgfSwKICAgIGNsZWFyTW9kZWw6IGZ1bmN0aW9uIGNsZWFyTW9kZWwoKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLmNsZWFyRmlsZXMoKTsKICAgICAgdGhpcy5pbWdsaXN0ID0gW107CiAgICB9LAogICAgZG93bkxvYWRNb2RlbDogZnVuY3Rpb24gZG93bkxvYWRNb2RlbCgpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmltZ2xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdXJsbmFtZSA9IHRoaXMuaW1nbGlzdFtpXS51cmwuc3BsaXQoJy8nKTsKICAgICAgICB2YXIgZmlsZW5hbWUgPSB1cmxuYW1lW3VybG5hbWUubGVuZ3RoIC0gMV07CiAgICAgICAgdmFyIHVybCA9ICdodHRwOi8vMTI3LjAuMC4xOjMwMDEnICsgdGhpcy5pbWdsaXN0W2ldLnVybC5zcGxpdChwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJKS5qb2luKCcnKTsKICAgICAgICBkb3dubG9hZFBpYyh1cmwsIGZpbGVuYW1lKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["deviceMixin","getToken","downloadPic","name","mixins","data","dialogImg","dialogVisible","imglist","token","mounted","methods","getRandom1","Math","random","toFixed","getRandom2","handlerDate","date","data1","split","data2","handleRemove","file","fileList","handlePictureCardPreview","handleSuccess","res","filelist","url","push","openImg","window","open","clearModel","$refs","upload","clearFiles","downLoadModel","i","length","urlname","filename","process","env","VUE_APP_BASE_API","join"],"sources":["src/views/photo/index.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"original_img\">\n      <el-divider content-position=\"left\">文件上传 (支持多选)</el-divider>\n      <el-upload\n        ref=\"upload\"\n        action=\"/dev-api/uploadimg\"\n        list-type=\"picture-card\"\n        multiple\n        :limit=\"8\"\n        :on-preview=\"handlePictureCardPreview\"\n        :on-remove=\"handleRemove\"\n        :on-success=\"handleSuccess\"\n        :headers=\"{token:token}\"\n      >\n        <i class=\"el-icon-plus\" />\n      </el-upload>\n      <el-dialog v-if=\"dialogVisible\" :visible.sync=\"dialogVisible\">\n        <img width=\"100%\" :src=\"dialogImg.url\" alt=\"\" title=\"点击在新窗口预览\" @click=\"openImg\">\n        <div><b>纬度：</b>{{ dialogImg.propties.Latitude }}</div>\n        <div><b>经度：</b>{{ dialogImg.propties.Longitude }}</div>\n        <div><b>裂缝地址：</b>{{ dialogImg.propties.Address[0] }}</div>\n        <div><b>拍摄时间：</b>{{ handlerDate(dialogImg.propties.Time_taken) }}</div>\n        <div><b>裂缝覆盖面积：</b>{{ getRandom1() }}(平方米)</div>\n        <div><b>危害程度：</b>中等</div>\n      </el-dialog>\n    </div>\n\n    <div class=\"buttons\" style=\"height: 40px\">\n      <el-button type=\"primary\" style=\"float: right;margin-left: 10px\" icon=\"el-icon-download\" @click=\"clearModel\">清空检测记录</el-button>\n      <el-button type=\"primary\" style=\"float: right\" icon=\"el-icon-download\" @click=\"downLoadModel\">下载检测结果</el-button>\n    </div>\n\n    <el-divider content-position=\"left\">模型检测结果</el-divider>\n\n    <div v-show=\"imglist.length\" class=\"new_img\">\n      <img v-for=\"(item,index) in imglist\" :key=\"index\" :src=\"item.url\" title=\"预览\" alt=\"预览\" @click=\"handlePictureCardPreview(item)\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport deviceMixin from '@/mixins/device'\nimport { getToken } from '@/utils/auth'\nimport { downloadPic } from '@/utils/download'\n\nexport default {\n  name: 'Photo',\n  mixins: [deviceMixin],\n  data() {\n    return {\n      dialogImg: {},\n      dialogVisible: false,\n      imglist: [],\n      token: ''\n    }\n  },\n  mounted() {\n    this.token = getToken()\n  },\n  methods: {\n    getRandom1() {\n      return ((Math.random() * 0.07) + 0.025).toFixed(2)\n    },\n    getRandom2() {\n      return (Math.random()).toFixed(2)\n    },\n    handlerDate(date) {\n      const data1 = date.split(' ')\n      const data2 = data1[0].split(':')\n      return data2[0] + '年' + data2[1] + '月' + data2[2] + '日 ' + data1[1]\n    },\n    handleRemove: function(file, fileList) {\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImg = file\n      this.dialogVisible = true\n    },\n    handleSuccess(res, file, filelist) {\n      res.url = '/dev-api' + res.url\n      this.imglist.push(res)\n    },\n    openImg() {\n      window.open(this.dialogImg.url)\n    },\n    clearModel() {\n      this.$refs.upload.clearFiles()\n      this.imglist = []\n    },\n    downLoadModel() {\n      for (let i = 0; i < this.imglist.length; i++) {\n        const urlname = this.imglist[i].url.split('/')\n        const filename = urlname[urlname.length - 1]\n        const url = 'http://127.0.0.1:3001' + this.imglist[i].url.split(process.env.VUE_APP_BASE_API).join('')\n        downloadPic(url, filename)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.original_img{\n\n}\n\n.new_img{\n  img {\n    width: 146px;\n    height: 146px;\n    margin: 0px 4px;\n    &:hover {\n      cursor: pointer;\n      transform: scale(1.1);\n      transition: 0.5s;\n    }\n  }\n}\n\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,OAAAA,WAAA;AACA,SAAAC,QAAA;AACA,SAAAC,WAAA;AAEA;EACAC,IAAA;EACAC,MAAA,GAAAJ,WAAA;EACAK,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;MACAC,aAAA;MACAC,OAAA;MACAC,KAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAD,KAAA,GAAAR,QAAA;EACA;EACAU,OAAA;IACAC,UAAA,WAAAA,WAAA;MACA,QAAAC,IAAA,CAAAC,MAAA,mBAAAC,OAAA;IACA;IACAC,UAAA,WAAAA,WAAA;MACA,OAAAH,IAAA,CAAAC,MAAA,GAAAC,OAAA;IACA;IACAE,WAAA,WAAAA,YAAAC,IAAA;MACA,IAAAC,KAAA,GAAAD,IAAA,CAAAE,KAAA;MACA,IAAAC,KAAA,GAAAF,KAAA,IAAAC,KAAA;MACA,OAAAC,KAAA,YAAAA,KAAA,YAAAA,KAAA,aAAAF,KAAA;IACA;IACAG,YAAA,WAAAA,aAAAC,IAAA,EAAAC,QAAA,GACA;IACAC,wBAAA,WAAAA,yBAAAF,IAAA;MACA,KAAAjB,SAAA,GAAAiB,IAAA;MACA,KAAAhB,aAAA;IACA;IACAmB,aAAA,WAAAA,cAAAC,GAAA,EAAAJ,IAAA,EAAAK,QAAA;MACAD,GAAA,CAAAE,GAAA,gBAAAF,GAAA,CAAAE,GAAA;MACA,KAAArB,OAAA,CAAAsB,IAAA,CAAAH,GAAA;IACA;IACAI,OAAA,WAAAA,QAAA;MACAC,MAAA,CAAAC,IAAA,MAAA3B,SAAA,CAAAuB,GAAA;IACA;IACAK,UAAA,WAAAA,WAAA;MACA,KAAAC,KAAA,CAAAC,MAAA,CAAAC,UAAA;MACA,KAAA7B,OAAA;IACA;IACA8B,aAAA,WAAAA,cAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,QAAA/B,OAAA,CAAAgC,MAAA,EAAAD,CAAA;QACA,IAAAE,OAAA,QAAAjC,OAAA,CAAA+B,CAAA,EAAAV,GAAA,CAAAT,KAAA;QACA,IAAAsB,QAAA,GAAAD,OAAA,CAAAA,OAAA,CAAAD,MAAA;QACA,IAAAX,GAAA,kCAAArB,OAAA,CAAA+B,CAAA,EAAAV,GAAA,CAAAT,KAAA,CAAAuB,OAAA,CAAAC,GAAA,CAAAC,gBAAA,EAAAC,IAAA;QACA5C,WAAA,CAAA2B,GAAA,EAAAa,QAAA;MACA;IACA;EACA;AACA"}]}