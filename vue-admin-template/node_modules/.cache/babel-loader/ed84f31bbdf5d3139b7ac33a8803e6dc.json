{"remainingRequest":"E:\\aproject\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!E:\\aproject\\vue-admin-template\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\aproject\\vue-admin-template\\src\\utils\\download.js","dependencies":[{"path":"E:\\aproject\\vue-admin-template\\src\\utils\\download.js","mtime":1682649003583},{"path":"E:\\aproject\\vue-admin-template\\babel.config.js","mtime":1680534710653},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680534835386},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1680534836652},{"path":"E:\\aproject\\vue-admin-template\\node_modules\\eslint-loader\\index.js","mtime":1680534835647}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKLyog5Zu+54mH55qE5LiL6L29Ki8KZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkUGljKHVybCwgZmlsZW5hbWUpIHsKICB2YXIgaW1nc3JjID0gdXJsOwogIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpOwogIC8vIOino+WGs+i3qOWfn2NhbnZhc+axoeafk+mXrumimAogIGltYWdlLnNldEF0dHJpYnV0ZSgnY3Jvc3NPcmlnaW4nLCAnYW5vbnltb3VzJyk7CiAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0OwogICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTsKICAgIHZhciB1cmwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsgLy8g5b6X5Yiw5Zu+54mH55qEYmFzZTY057yW56CB5pWw5o2uCiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgIGEuaHJlZiA9IHVybDsKICAgIGEuY2xpY2soKTsKICB9OwogIGltYWdlLnNyYyA9IGltZ3NyYzsKfQovKiDop4bpopHnmoTkuIvovb0qLwpleHBvcnQgZnVuY3Rpb24gZG93blZpZGVvKHVybCkgewogIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTsKICB4aHIuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAob2JqLmxlbmd0aENvbXB1dGFibGUpIHsKICAgICAgdmFyIHBlcmNlbnRDb21wbGV0ZSA9IG9iai5sb2FkZWQgLyBvYmoudG90YWw7CiAgICAgIGNvbnNvbGUubG9nKChwZXJjZW50Q29tcGxldGUgKiAxMDApLnRvRml4ZWQoMikgKyAnJScpOwogICAgICAvLyDlj6/lvpfliLDkuIvovb3ov5vluqYKICAgIH0KICB9LCBmYWxzZSk7CiAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJzsgLy8g6K6+572u6L+U5Zue57G75Z6LYmxvYgogIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQgJiYgeGhyLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgIHZhciBibG9iID0gdGhpcy5yZXNwb25zZTsKICAgICAgLy8g6L2s5o2i5LiA5LiqYmxvYumTvuaOpQogICAgICB2YXIgdSA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtibG9iXSwgewogICAgICAgIHR5cGU6ICd2aWRlby9tcDQnCiAgICAgIH0pKTsKICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGEuZG93bmxvYWQgPSB1cmw7IC8vIOi/memHjOaYr+aWh+S7tuWQjeensO+8jOi/memHjOaaguaXtueUqOmTvuaOpeS7o+abv++8jOWPr+S7peabv+aNogogICAgICBhLmhyZWYgPSB1OwogICAgICBhLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgIGEuY2xpY2soKTsKICAgICAgYS5yZW1vdmUoKTsKICAgIH0KICB9OwogIHhoci5zZW5kKCk7Cn0="},{"version":3,"names":["downloadPic","url","filename","imgsrc","image","Image","setAttribute","onload","canvas","document","createElement","width","height","context","getContext","drawImage","toDataURL","a","download","href","click","src","downVideo","xhr","XMLHttpRequest","open","addEventListener","obj","lengthComputable","percentComplete","loaded","total","console","log","toFixed","responseType","readyState","status","blob","response","u","window","URL","createObjectURL","Blob","type","style","display","body","appendChild","remove","send"],"sources":["E:/aproject/vue-admin-template/src/utils/download.js"],"sourcesContent":["/* 图片的下载*/\nexport function downloadPic(url, filename) {\n  const imgsrc = url\n  const image = new Image()\n  // 解决跨域canvas污染问题\n  image.setAttribute('crossOrigin', 'anonymous')\n  image.onload = function() {\n    const canvas = document.createElement('canvas')\n    canvas.width = image.width\n    canvas.height = image.height\n    const context = canvas.getContext('2d')\n    context.drawImage(image, 0, 0, image.width, image.height)\n    const url = canvas.toDataURL('image/png') // 得到图片的base64编码数据\n    const a = document.createElement('a')\n    a.download = filename\n    a.href = url\n    a.click()\n  }\n  image.src = imgsrc\n}\n/* 视频的下载*/\nexport function downVideo(url) {\n  const xhr = new XMLHttpRequest()\n  xhr.open('GET', url, true)\n  xhr.addEventListener('progress', function(obj) {\n    if (obj.lengthComputable) {\n      const percentComplete = obj.loaded / obj.total\n      console.log((percentComplete * 100).toFixed(2) + '%')\n      // 可得到下载进度\n    }\n  }, false)\n  xhr.responseType = 'blob' // 设置返回类型blob\n  xhr.onload = function() {\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      const blob = this.response\n      // 转换一个blob链接\n      const u = window.URL.createObjectURL(new Blob([blob], {\n        type: 'video/mp4'\n      }))\n      const a = document.createElement('a')\n      a.download = url // 这里是文件名称，这里暂时用链接代替，可以替换\n      a.href = u\n      a.style.display = 'none'\n      document.body.appendChild(a)\n      a.click()\n      a.remove()\n    }\n  }\n  xhr.send()\n}\n"],"mappings":";;;;;;AAAA;AACA,OAAO,SAASA,WAAWA,CAACC,GAAG,EAAEC,QAAQ,EAAE;EACzC,IAAMC,MAAM,GAAGF,GAAG;EAClB,IAAMG,KAAK,GAAG,IAAIC,KAAK,EAAE;EACzB;EACAD,KAAK,CAACE,YAAY,CAAC,aAAa,EAAE,WAAW,CAAC;EAC9CF,KAAK,CAACG,MAAM,GAAG,YAAW;IACxB,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,MAAM,CAACG,KAAK,GAAGP,KAAK,CAACO,KAAK;IAC1BH,MAAM,CAACI,MAAM,GAAGR,KAAK,CAACQ,MAAM;IAC5B,IAAMC,OAAO,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAC;IACvCD,OAAO,CAACE,SAAS,CAACX,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEA,KAAK,CAACO,KAAK,EAAEP,KAAK,CAACQ,MAAM,CAAC;IACzD,IAAMX,GAAG,GAAGO,MAAM,CAACQ,SAAS,CAAC,WAAW,CAAC,EAAC;IAC1C,IAAMC,CAAC,GAAGR,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACrCO,CAAC,CAACC,QAAQ,GAAGhB,QAAQ;IACrBe,CAAC,CAACE,IAAI,GAAGlB,GAAG;IACZgB,CAAC,CAACG,KAAK,EAAE;EACX,CAAC;EACDhB,KAAK,CAACiB,GAAG,GAAGlB,MAAM;AACpB;AACA;AACA,OAAO,SAASmB,SAASA,CAACrB,GAAG,EAAE;EAC7B,IAAMsB,GAAG,GAAG,IAAIC,cAAc,EAAE;EAChCD,GAAG,CAACE,IAAI,CAAC,KAAK,EAAExB,GAAG,EAAE,IAAI,CAAC;EAC1BsB,GAAG,CAACG,gBAAgB,CAAC,UAAU,EAAE,UAASC,GAAG,EAAE;IAC7C,IAAIA,GAAG,CAACC,gBAAgB,EAAE;MACxB,IAAMC,eAAe,GAAGF,GAAG,CAACG,MAAM,GAAGH,GAAG,CAACI,KAAK;MAC9CC,OAAO,CAACC,GAAG,CAAC,CAACJ,eAAe,GAAG,GAAG,EAAEK,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;MACrD;IACF;EACF,CAAC,EAAE,KAAK,CAAC;EACTX,GAAG,CAACY,YAAY,GAAG,MAAM,EAAC;EAC1BZ,GAAG,CAAChB,MAAM,GAAG,YAAW;IACtB,IAAIgB,GAAG,CAACa,UAAU,KAAK,CAAC,IAAIb,GAAG,CAACc,MAAM,KAAK,GAAG,EAAE;MAC9C,IAAMC,IAAI,GAAG,IAAI,CAACC,QAAQ;MAC1B;MACA,IAAMC,CAAC,GAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAAC,IAAIC,IAAI,CAAC,CAACN,IAAI,CAAC,EAAE;QACpDO,IAAI,EAAE;MACR,CAAC,CAAC,CAAC;MACH,IAAM5B,CAAC,GAAGR,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACrCO,CAAC,CAACC,QAAQ,GAAGjB,GAAG,EAAC;MACjBgB,CAAC,CAACE,IAAI,GAAGqB,CAAC;MACVvB,CAAC,CAAC6B,KAAK,CAACC,OAAO,GAAG,MAAM;MACxBtC,QAAQ,CAACuC,IAAI,CAACC,WAAW,CAAChC,CAAC,CAAC;MAC5BA,CAAC,CAACG,KAAK,EAAE;MACTH,CAAC,CAACiC,MAAM,EAAE;IACZ;EACF,CAAC;EACD3B,GAAG,CAAC4B,IAAI,EAAE;AACZ"}]}