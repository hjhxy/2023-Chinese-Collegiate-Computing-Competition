(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-720b1608"],{"0e25":function(e,t,n){"use strict";n("323a")},"323a":function(e,t,n){},"3ac9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"header"},[n("el-input",{attrs:{placeholder:"账号",clearable:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchTable}},[e._v("搜索")])],1),n("el-divider"),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.pagenationData.currentData,"element-loading-text":"Loading","max-height":e.screenHeight,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index)+" ")]}}])}),n("el-table-column",{attrs:{label:"用户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user_id)+" ")]}}])}),n("el-table-column",{attrs:{label:"检测类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("img"==t.row.check_type?"图片":"视频")+" ")]}}])}),n("el-table-column",{attrs:{label:"原始图片/视频",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["img"==t.row.check_type?n("img",{staticStyle:{width:"150px",height:"auto"},attrs:{src:"/dev-api"+t.row.srcurl,title:"点击预览"},on:{click:function(n){return e.handlePictureCardPreview("dev-api"+t.row.srcurl,"img")}}}):n("video",{staticStyle:{width:"150px",height:"auto"},attrs:{src:"/dev-api"+t.row.srcurl,crossOrigin:"Anonymous"},on:{click:function(n){return e.handlePictureCardPreview("dev-api"+t.row.srcurl,"video")}}})]}}])}),n("el-table-column",{attrs:{label:"检测结果",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["img"==t.row.check_type?n("img",{staticStyle:{width:"150px",height:"auto"},attrs:{src:"/dev-api"+t.row.url,title:"点击预览"},on:{click:function(n){return e.handlePictureCardPreview("dev-api"+t.row.url,"img")}}}):n("video",{staticStyle:{width:"150px",height:"auto"},attrs:{src:"/dev-api"+t.row.url,crossOrigin:"Anonymous"},on:{click:function(n){return e.handlePictureCardPreview("dev-api"+t.row.url,"video")}}})]}}])}),n("el-table-column",{attrs:{label:"检测时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.handlerTime(parseInt(t.row.check_time)))+" ")]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",label:"详细信息",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{domProps:{innerHTML:e._s(t.row.detail)}})]}}])}),n("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleDown(t.$index,t.row)}}},[e._v("下载")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"prev, pager, next",total:4}}),e.dialogVisible?n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogImg?n("img",{attrs:{width:"100%",src:e.dialogImg,alt:"",title:"点击在新窗口预览"},on:{click:e.openImg}}):e._e(),e.dialogVideo?n("video",{staticStyle:{width:"100%"},attrs:{src:e.dialogVideo,crossOrigin:"Anonymous",controls:""}}):e._e()]):e._e()],1)},i=[],r=(n("d81d"),n("b680"),n("4de4"),n("d3b7"),n("a434"),n("fb6a"),n("5227")),o=n("49a0"),l=n("989b"),c={filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){return{username:"",drawer:!1,list:null,listcopy:null,listLoading:!0,dialogVisible:!1,dialogImg:"",dialogVideo:"",formLabelAlign:{nickname:"",username:"",password:"",phone:""},pagenationData:{totol:0,currentIndex:1,currentData:[]}}},computed:{screenHeight:function(){return Object(o["a"])()-220}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(r["a"])().then((function(t){e.pagenationData.currentData=t.data.items,e.pagenationData.currentData=e.pagenationData.currentData.map((function(t){return t.detail="经度："+e.getRandomx()+"<br/>纬度："+e.getRandomy(),t})),console.log(e.pagenationData.currentData),e.listcopy=e.list,e.listLoading=!1})).catch((function(){console.log("获取数据错误")}))},getRandomx:function(){return(3*Math.random()+111).toFixed(2)},getRandomy:function(){return(1.5*Math.random()+27).toFixed(2)},searchTable:function(){var e=this;this.username&&(this.list=this.list.filter((function(t){return t.nickname===e.username})),console.log(this.list))},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(n){t.drawer=!1,e()})).catch((function(e){}))},handleDown:function(e,t){if(console.log(t),"img"===t.check_type){var n=t.url.split("/");Object(l["b"])("http://127.0.0.1:3001"+t.url,parseInt(1e3*Math.random())+n[n.length-1])}else Object(l["a"])("/dev-api"+t.url)},handleDelete:function(e,t){this.pagenationData.currentData.splice(e,1),this.$message({type:"success",message:"删除成功"}),console.log(e,t)},handlePictureCardPreview:function(e,t){"img"===t?(this.dialogImg=e,this.dialogVideo=""):(this.dialogImg="",this.dialogVideo=e),this.dialogVisible=!0},openImg:function(){window.open(this.dialogImg)},handlerTime:function(e){return String(new Date(e)).slice(10)}}},s=c,u=(n("0e25"),n("2877")),d=Object(u["a"])(s,a,i,!1,null,null,null);t["default"]=d.exports},"49a0":function(e,t,n){"use strict";function a(){return document.body.clientHeight}n.d(t,"a",(function(){return a}))},5227:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("b775");function i(e){return Object(a["a"])({url:"/system/checklist",method:"get",params:e})}},"989b":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));n("b680"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861");function a(e,t){var n=e,a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var n=e.getContext("2d");n.drawImage(a,0,0,a.width,a.height);var i=e.toDataURL("image/png"),r=document.createElement("a");r.download=t,r.href=i,r.click()},a.src=n}function i(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;console.log((100*t).toFixed(2)+"%")}}),!1),t.responseType="blob",t.onload=function(){if(4===t.readyState&&200===t.status){var n=this.response,a=window.URL.createObjectURL(new Blob([n],{type:"video/mp4"})),i=document.createElement("a");i.download=e,i.href=a,i.style.display="none",document.body.appendChild(i),i.click(),i.remove()}},t.send()}},a434:function(e,t,n){"use strict";var a=n("23e7"),i=n("23cb"),r=n("a691"),o=n("50c4"),l=n("7b0b"),c=n("65f0"),s=n("8418"),u=n("1dde"),d=n("ae40"),g=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,p=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!g||!h},{splice:function(e,t){var n,a,u,d,g,h,v=l(this),w=o(v.length),y=i(e,w),_=arguments.length;if(0===_?n=a=0:1===_?(n=0,a=w-y):(n=_-2,a=p(f(r(t),0),w-y)),w+n-a>m)throw TypeError(b);for(u=c(v,a),d=0;d<a;d++)g=y+d,g in v&&s(u,d,v[g]);if(u.length=a,n<a){for(d=y;d<w-a;d++)g=d+a,h=d+n,g in v?v[h]=v[g]:delete v[h];for(d=w;d>w-a+n;d--)delete v[d-1]}else if(n>a)for(d=w-a;d>y;d--)g=d+a-1,h=d+n-1,g in v?v[h]=v[g]:delete v[h];for(d=0;d<n;d++)v[d+y]=arguments[d+2];return v.length=w-a+n,u}})}}]);